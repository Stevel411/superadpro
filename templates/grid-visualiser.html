<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Profit Engine Grid Visualiser — SuperAdPro</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800&family=Rethink+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root{--cyan:#00d4ff;--cyan2:#00b4d8;--green:#10b981;--gold:#f59e0b;--bg:#020818;--border:rgba(0,212,255,0.12)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'DM Sans','Rethink Sans',sans-serif;background:var(--bg);color:#e8f0fe;min-height:100vh;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(0,212,255,0.025) 1px,transparent 1px),linear-gradient(90deg,rgba(0,212,255,0.025) 1px,transparent 1px);background-size:48px 48px;pointer-events:none;z-index:0;animation:gridDrift 30s linear infinite}
@keyframes gridDrift{from{background-position:0 0}to{background-position:48px 48px}}
body::after{content:'';position:fixed;inset:0;pointer-events:none;z-index:0;background:radial-gradient(ellipse 60% 40% at 20% 30%,rgba(0,180,216,0.07),transparent),radial-gradient(ellipse 50% 40% at 80% 70%,rgba(124,58,237,0.07),transparent)}

nav{background:rgba(2,8,24,0.95);border-bottom:1px solid var(--border);padding:0 40px;height:64px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;backdrop-filter:blur(12px)}
.nav-brand{display:flex;align-items:center;gap:10px;text-decoration:none}
.nav-brand span{font-weight:800;font-size:18px;letter-spacing:2px;text-transform:uppercase;background:linear-gradient(135deg,#00b4d8,#6d28d9);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.nav-links{display:flex;align-items:center;gap:24px}
.nav-links a{font-size:17px;font-weight:500;color:#4a5a6e;text-decoration:none;transition:color 0.2s}
.nav-links a:hover{color:var(--cyan)}
.btn-nav{background:linear-gradient(135deg,#00b4d8,#6d28d9);color:#fff!important;padding:8px 20px;border-radius:7px;font-weight:700!important}

.hero{text-align:center;padding:50px 40px 30px;position:relative;z-index:1}
.hero-badge{display:inline-flex;align-items:center;gap:8px;background:rgba(0,212,255,0.06);border:1px solid rgba(0,212,255,0.2);border-radius:999px;padding:6px 18px;font-size:18px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:var(--cyan);margin-bottom:20px}
.hero-badge::before{content:'';width:6px;height:6px;border-radius:50%;background:var(--cyan);animation:blink 1.5s infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0.2}}
.hero h1{font-size:clamp(22px,4vw,40px);font-weight:800;line-height:1.1;margin-bottom:10px}
.hero h1 span{background:linear-gradient(135deg,#00d4ff,#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero p{font-size:17px;color:#64748b;max-width:560px;margin:0 auto;line-height:1.7}

.pkg-bar{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;padding:16px 40px 20px;position:relative;z-index:1}
.pkg-btn{padding:8px 16px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:rgba(255,255,255,0.03);color:rgba(255,255,255,0.45);font-family:'DM Sans','Rethink Sans',sans-serif;font-size:17px;font-weight:600;cursor:pointer;transition:all 0.2s}
.pkg-btn:hover{border-color:var(--cyan);color:var(--cyan);background:rgba(0,212,255,0.05)}
.pkg-btn.active{background:rgba(0,212,255,0.1);border-color:var(--cyan);color:var(--cyan);box-shadow:0 0 20px rgba(0,212,255,0.15)}

.main{display:grid;grid-template-columns:1fr 340px;gap:20px;max-width:1200px;margin:0 auto;padding:0 24px 80px;position:relative;z-index:1}
@media(max-width:900px){.main{grid-template-columns:1fr}}

.grid-panel{background:rgba(5,15,35,0.8);border:1px solid var(--border);border-radius:16px;padding:24px;backdrop-filter:blur(8px)}
.panel-eyebrow{font-size:17px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:rgba(0,212,255,0.5);margin-bottom:4px}
.panel-title{font-size:17px;font-weight:800;color:#fff;margin-bottom:16px}

.level-labels{display:grid;grid-template-columns:repeat(8,1fr);gap:5px;margin-bottom:4px}
.level-label{text-align:center;font-size:18px;font-weight:700;letter-spacing:1px;text-transform:uppercase;padding:2px 0}

/* GRID */
.grid-wrap{display:grid;grid-template-columns:repeat(8,1fr);gap:5px;margin-bottom:16px}
.cell{
  aspect-ratio:1;min-height:64px;border-radius:6px;
  display:flex;align-items:center;justify-content:center;
  font-size:clamp(10px,1.3vw,15px);font-weight:800;line-height:1.2;text-align:center;
  transition:all 0.35s cubic-bezier(0.34,1.56,0.64,1);
  background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.05);
  color:transparent;cursor:default;position:relative;overflow:hidden;
  -webkit-font-smoothing:antialiased;will-change:transform;
}
.cell::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,0.1),transparent);opacity:0;transition:opacity 0.3s}
/* Owner cell */
.cell.owner{background:linear-gradient(135deg,#00b4d8,#0e7490)!important;border:2px solid var(--cyan)!important;color:#fff!important;box-shadow:0 0 24px rgba(0,212,255,0.5),0 0 48px rgba(0,212,255,0.15)!important}
.cell.owner::before{opacity:1}
/* Direct referral — bright green glow */
.cell.direct{color:#fff!important;border:2px solid rgba(52,211,153,0.7)!important;box-shadow:0 0 18px rgba(16,185,129,0.55),0 0 36px rgba(16,185,129,0.2)!important}
/* Overspill — level colour, subtler */
.cell.overspill{color:rgba(255,255,255,0.9)!important}
.cell.pop{animation:cellPop 0.45s cubic-bezier(0.34,1.56,0.64,1)}
@keyframes cellPop{0%{transform:scale(0.25);opacity:0}65%{transform:scale(1.12)}100%{transform:scale(1)}}

/* Controls */
.controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:14px}
.btn{padding:10px 20px;border-radius:8px;border:none;font-family:'DM Sans','Rethink Sans',sans-serif;font-size:17px;font-weight:700;cursor:pointer;transition:all 0.2s}
.btn-play{background:linear-gradient(135deg,var(--cyan),var(--cyan2));color:#020818;box-shadow:0 4px 16px rgba(0,212,255,0.25)}
.btn-play:hover{box-shadow:0 6px 24px rgba(0,212,255,0.4);transform:translateY(-1px)}
.btn-reset{background:rgba(255,255,255,0.06);color:rgba(255,255,255,0.55);border:1px solid rgba(255,255,255,0.1)}
.btn-reset:hover{background:rgba(255,255,255,0.1);color:#fff}
.speed-wrap{display:flex;align-items:center;gap:8px;margin-left:auto}
.speed-label{font-size:18px;color:rgba(255,255,255,0.35);letter-spacing:1px;text-transform:uppercase}
input[type=range]{width:80px;accent-color:var(--cyan);cursor:pointer}

/* Direct-count slider panel */
.direct-panel{background:rgba(0,0,0,0.2);border:1px solid rgba(16,185,129,0.15);border-radius:10px;padding:14px 16px;margin-bottom:14px}
.direct-panel-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.direct-panel-label{font-size:18px;font-weight:700;color:#fff}
.direct-panel-sub{font-size:18px;color:#6b7d94;margin-top:2px}
.direct-count-big{font-size:32px;font-weight:800;color:var(--green);line-height:1}
.direct-count-caption{font-size:17px;color:rgba(255,255,255,0.3)}
.legend-row{display:flex;gap:14px;margin-top:10px;flex-wrap:wrap}
.legend-item{display:flex;align-items:center;gap:6px;font-size:18px;color:#64748b}
.legend-swatch{width:14px;height:14px;border-radius:3px;flex-shrink:0}

/* Progress */
.progress-wrap{margin-bottom:14px}
.progress-row{display:flex;justify-content:space-between;margin-bottom:6px}
.progress-label{font-size:18px;color:rgba(255,255,255,0.35);letter-spacing:1px;text-transform:uppercase}
.progress-value{font-size:18px;color:var(--cyan)}
.progress-bar{height:3px;background:rgba(255,255,255,0.06);border-radius:99px;overflow:hidden}
.progress-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--cyan),#a78bfa);border-radius:99px;transition:width 0.3s;box-shadow:0 0 8px rgba(0,212,255,0.4)}

/* Advance note */
.advance-note{display:flex;align-items:flex-start;gap:12px;padding:12px 14px;background:rgba(124,58,237,0.06);border:1px solid rgba(124,58,237,0.15);border-radius:8px;margin-bottom:12px}
.advance-note-text{font-size:17px;color:#64748b;line-height:1.6}
.advance-note-title{font-size:17px;font-weight:700;color:#a78bfa;margin-bottom:3px}

/* Advance banner */
.advance-banner{display:none;text-align:center;padding:16px;background:linear-gradient(135deg,rgba(0,212,255,0.1),rgba(124,58,237,0.1));border:1px solid rgba(0,212,255,0.25);border-radius:10px}
.advance-banner.show{display:block;animation:fadeUp 0.4s ease}
@keyframes fadeUp{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
.advance-title{font-size:17px;font-weight:700;color:var(--cyan);margin-bottom:4px}
.advance-sub{font-size:17px;color:rgba(255,255,255,0.45)}

/* RIGHT col */
.right-col{display:flex;flex-direction:column;gap:14px}
.stat-card{background:rgba(5,15,35,0.8);border:1px solid var(--border);border-radius:12px;padding:18px;backdrop-filter:blur(8px)}
.eyebrow{font-size:17px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:rgba(255,255,255,0.3);margin-bottom:12px}
.earn-row{display:flex;justify-content:space-between;align-items:center;padding:9px 0;border-bottom:1px solid rgba(255,255,255,0.04)}
.earn-row:last-child{border-bottom:none;padding-bottom:0}
.earn-left{display:flex;align-items:center;gap:10px}
.earn-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.earn-label{font-size:18px;color:#4a5a6e}
.earn-sub{font-size:18px;color:#6b7d94;margin-top:2px}
.earn-amount{font-size:18px;font-weight:700;transition:all 0.25s;text-align:right}
.earn-amount.bump{animation:numBump 0.25s ease}
@keyframes numBump{0%,100%{transform:scale(1)}50%{transform:scale(1.18)}}

.total-card{background:linear-gradient(135deg,rgba(0,212,255,0.06),rgba(124,58,237,0.06));border:1px solid rgba(0,212,255,0.2);border-radius:12px;padding:18px;text-align:center}
.total-label{font-size:17px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:rgba(255,255,255,0.35);margin-bottom:6px}
.total-amount{font-size:30px;font-weight:800;background:linear-gradient(135deg,var(--cyan),#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;transition:all 0.3s}
.total-sub{font-size:18px;color:rgba(255,255,255,0.3);margin-top:4px}

.split-card{background:rgba(5,15,35,0.8);border:1px solid var(--border);border-radius:12px;padding:18px;backdrop-filter:blur(8px)}
.split-bar-wrap{display:flex;height:8px;border-radius:99px;overflow:hidden;gap:2px;margin:10px 0 12px}
.split-seg{border-radius:3px}
.split-legend{display:flex;flex-direction:column;gap:7px}
.split-item{display:flex;align-items:center;gap:8px;font-size:17px;color:rgba(200,220,255,0.55)}
.split-swatch{width:8px;height:8px;border-radius:2px;flex-shrink:0}
.split-pct{margin-left:auto;font-size:17px;font-weight:700}

.info-strip{background:rgba(5,15,35,0.8);border:1px solid var(--border);border-radius:12px;padding:18px;backdrop-filter:blur(8px)}
.info-title{font-size:17px;font-weight:700;color:#fff;margin-bottom:10px}
.info-row{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid rgba(255,255,255,0.04);font-size:17px}
.info-row:last-child{border-bottom:none}
.info-key{color:#6b7d94}
.info-val{font-weight:700}

.log-card{background:rgba(5,15,35,0.8);border:1px solid var(--border);border-radius:12px;padding:18px;backdrop-filter:blur(8px)}
.log-list{display:flex;flex-direction:column;gap:4px;max-height:200px;overflow:hidden}
.log-item{display:flex;justify-content:space-between;align-items:center;font-size:18px;color:rgba(255,255,255,0.4);animation:slideIn 0.22s ease;padding:4px 0;border-bottom:1px solid rgba(255,255,255,0.03)}
.log-item:last-child{border-bottom:none}
@keyframes slideIn{from{opacity:0;transform:translateX(-6px)}to{opacity:1;transform:none}}
.log-tag{font-size:17px;padding:1px 6px;border-radius:3px;margin-left:5px;font-weight:700}
.log-tag.direct{color:#10b981;border:1px solid rgba(16,185,129,0.4);background:rgba(16,185,129,0.08)}
.log-tag.overspill{color:rgba(0,212,255,0.6);border:1px solid rgba(0,212,255,0.2);background:rgba(0,212,255,0.05)}
.log-amt{font-weight:700}
.reg-overlay{position:fixed;inset:0;background:rgba(1,8,20,0.85);backdrop-filter:blur(6px);z-index:1000;display:flex;align-items:center;justify-content:center;padding:16px;opacity:0;pointer-events:none;transition:opacity 0.25s}
.reg-overlay.open{opacity:1;pointer-events:all}
.reg-modal{background:#0d1117;border:1px solid rgba(0,212,255,0.15);border-radius:18px;padding:36px 38px;width:100%;max-width:460px;position:relative;box-shadow:0 24px 80px rgba(0,0,0,0.6);transform:translateY(20px);transition:transform 0.25s}
.reg-overlay.open .reg-modal{transform:translateY(0)}
.reg-close{position:absolute;top:14px;right:18px;background:none;border:none;color:rgba(200,220,255,0.4);font-size:22px;cursor:pointer;line-height:1;padding:4px 8px;border-radius:6px;transition:color 0.2s}
.reg-close:hover{color:rgba(200,220,255,0.9)}
.reg-title{font-size:22px;font-weight:800;color:#fff;margin-bottom:4px}
.reg-sub{font-size:13px;color:rgba(200,220,255,0.5);margin-bottom:24px}
.reg-field{margin-bottom:16px}
.reg-label{display:block;font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:rgba(200,220,255,0.5);margin-bottom:6px}
.reg-input{width:100%;padding:11px 14px;border:1.5px solid rgba(0,212,255,0.12);border-radius:9px;background:rgba(0,212,255,0.04);color:#fff;font-size:14px;font-family:inherit;box-sizing:border-box;transition:border-color 0.2s}
.reg-input:focus{outline:none;border-color:#00d4ff;background:rgba(0,212,255,0.07)}
.reg-input::placeholder{color:rgba(200,220,255,0.25)}
.reg-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.reg-terms{display:flex;align-items:flex-start;gap:10px;margin-bottom:20px;font-size:12px;color:rgba(200,220,255,0.45);line-height:1.5}
.reg-terms input{width:15px;height:15px;flex-shrink:0;margin-top:1px;accent-color:#00d4ff}
.reg-terms a{color:rgba(0,212,255,0.7);text-decoration:none}
.reg-submit{width:100%;padding:13px;background:linear-gradient(135deg,#00b4d8,#6d28d9);border:none;border-radius:10px;color:#fff;font-size:14px;font-weight:800;font-family:inherit;cursor:pointer;transition:opacity 0.2s;letter-spacing:0.3px}
.reg-submit:hover{opacity:0.9}
.reg-submit:disabled{opacity:0.5;cursor:not-allowed}
.reg-err{display:none;margin-bottom:14px;padding:10px 14px;background:#fef2f2;border:1px solid #fecaca;border-radius:8px;font-size:12px;color:#dc2626;font-weight:600}
.reg-login{text-align:center;margin-top:16px;font-size:12px;color:rgba(200,220,255,0.4)}
.reg-login a{color:rgba(0,212,255,0.7);text-decoration:none;font-weight:600}
@media(max-width:500px){.reg-modal{padding:28px 22px}.reg-row{grid-template-columns:1fr}}


.login-overlay{position:fixed;inset:0;background:rgba(1,8,20,0.85);backdrop-filter:blur(6px);z-index:1001;display:flex;align-items:center;justify-content:center;padding:16px;opacity:0;pointer-events:none;transition:opacity 0.25s}
.login-overlay.open{opacity:1;pointer-events:all}
.login-modal{background:#0d1117;border:1px solid rgba(0,212,255,0.15);border-radius:18px;padding:36px 38px;width:100%;max-width:400px;position:relative;box-shadow:0 24px 80px rgba(0,0,0,0.6);transform:translateY(20px);transition:transform 0.25s}
.login-overlay.open .login-modal{transform:translateY(0)}
@media(max-width:500px){.login-modal{padding:28px 22px}}

</style>
  <link rel="stylesheet" href="/static/mobile.css">
  <link rel="manifest" href="/static/manifest.json">
  <meta name="theme-color" content="#0a0a1a">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="SuperAdPro">
  <link rel="apple-touch-icon" href="/static/icons/icon-192.png">
</head>
<body>
<!-- ── Mobile Topbar ── -->
<div class="mobile-topbar">
  <a class="mobile-topbar-left" href="/dashboard">
    <svg width="26" height="26" viewBox="0 0 100 100">
      <defs>
        <linearGradient id="mhg" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#4f8ef7"/>
          <stop offset="50%" stop-color="#6d28d9"/>
          <stop offset="100%" stop-color="#00b4d8"/>
        </linearGradient>
      </defs>
      <polygon points="50,3 93,27 93,73 50,97 7,73 7,27" fill="url(#mhg)"/>
      <text x="50" y="63" text-anchor="middle" font-family="Arial Black" font-weight="900" font-size="42" fill="#00d4ff">S</text>
    </svg>
    <div>
      <div class="mobile-topbar-name">SuperAdPro</div>
      <div class="mobile-topbar-page">Income Grid</div>
    </div>
  </a>
  {%- if balance is defined %}<div class="mobile-balance-chip">${{ '%.2f'|format(balance) }} USDT</div>{%- endif %}
</div>


<svg width="0" height="0" style="position:absolute">
  <defs>
    <linearGradient id="ob" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#00b4d8"/><stop offset="30%" stop-color="#6d28d9"/><stop offset="70%" stop-color="#a78bfa"/><stop offset="100%" stop-color="#6d28d9"/></linearGradient>
    <linearGradient id="sf" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#0a0a2e"/><stop offset="40%" stop-color="#06061a"/><stop offset="100%" stop-color="#03031a"/></linearGradient>
    <linearGradient id="lg2" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#a78bfa"/><stop offset="25%" stop-color="#00b4d8"/><stop offset="50%" stop-color="#6d28d9"/><stop offset="75%" stop-color="#00b4d8"/><stop offset="100%" stop-color="#a78bfa"/></linearGradient>
    <linearGradient id="hl" x1="0%" y1="0%" x2="60%" y2="100%"><stop offset="0%" stop-color="#ffffff" stop-opacity="0.12"/><stop offset="100%" stop-color="#000000" stop-opacity="0.15"/></linearGradient>
    <filter id="sg"><feGaussianBlur stdDeviation="2.5" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
    <symbol id="shield" viewBox="0 0 100 100">
      <defs>
        <linearGradient id="hexgrad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#4f8ef7"/>
          <stop offset="50%" stop-color="#6d28d9"/>
          <stop offset="100%" stop-color="#00b4d8"/>
        </linearGradient>
        <linearGradient id="hexinner" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#1a3a8f"/>
          <stop offset="100%" stop-color="#0d1a5c"/>
        </linearGradient>
      </defs>
      <polygon points="50,3 93,27 93,73 50,97 7,73 7,27" fill="url(#hexgrad)" />
      <polygon points="50,12 84,31 84,69 50,88 16,69 16,31" fill="url(#hexinner)" />
      <text x="50" y="63" text-anchor="middle" font-family="Arial Black,sans-serif" font-weight="900" font-size="38" fill="#00d4ff" letter-spacing="-2">S</text>
    </symbol>
  </defs>
</svg>

<nav>
    <a href="/" class="nav-logo">
        <svg width="32" height="32"><use href="#shield"/></svg>
        <span class="nav-brand">SuperAdPro</span>
    </a>
    <ul class="nav-links">
        <li><a href="/how-it-works">How It Works</a></li>
        <li><span class="nav-sep">·</span></li>
        <li><a href="/for-advertisers">Advertisers</a></li>
        <li><span class="nav-sep">·</span></li>
        <li><a href="/compensation-plan">Affiliates</a></li>
        <li><span class="nav-sep">·</span></li>
        <li><a href="/packages">Pricing</a></li>
        <li><span class="nav-sep">·</span></li>
        <li><a href="/faq">FAQ</a></li>
        <li><span class="nav-sep">·</span></li>
        <li><a href="/support">Support</a></li>
    </ul>
    <div style="display:flex;align-items:center;gap:10px">
        <a href="#" onclick="openLoginModal();return false;" style="font-size:13px;font-weight:600;color:rgba(200,230,210,0.6);text-decoration:none;padding:7px 14px;border:1px solid rgba(255,255,255,0.1);border-radius:7px;transition:all 0.2s" onmouseover="this.style.color='rgba(200,230,210,0.9)'" onmouseout="this.style.color='rgba(200,230,210,0.6)'">Log In</a>
        <a href="#" class="nav-cta" onclick="openRegModal();return false;">Register Here</a>
    </div>
</nav>

<!-- ── Login Modal ── -->
<div class="login-overlay" id="loginOverlay" onclick="if(event.target===this)closeLoginModal()">
  <div class="login-modal">
    <button class="reg-close" onclick="closeLoginModal()" aria-label="Close">✕</button>
    <div class="reg-title">Log In</div>
    <div class="reg-sub">Welcome back · Enter your details below</div>
    <div id="loginErr" class="reg-err"></div>
    <form id="loginModalForm">
      <div class="reg-field">
        <label class="reg-label">Username or Email</label>
        <input class="reg-input" type="text" id="loginUser" placeholder="username or email" required autocomplete="username">
      </div>
      <div class="reg-field" style="margin-bottom:8px">
        <label class="reg-label">Password</label>
        <input class="reg-input" type="password" id="loginPw" placeholder="Your password" required autocomplete="current-password">
      </div>
      <div style="text-align:right;margin-bottom:20px">
        <a href="/forgot-password" style="font-size:11px;color:rgba(0,212,255,0.6);text-decoration:none">Forgot password?</a>
      </div>
      <button type="submit" class="reg-submit" id="loginBtn">Log In →</button>
    </form>
    <div class="reg-login">Don’t have an account? <a href="#" onclick="closeLoginModal();openRegModal();return false;">Register here →</a></div>
  </div>
</div>

<!-- ── Registration Modal ── -->
<div class="reg-overlay" id="regOverlay" onclick="if(event.target===this)closeRegModal()">
  <div class="reg-modal">
    <button class="reg-close" onclick="closeRegModal()" aria-label="Close">✕</button>
    <div class="reg-title">Create Your Free Account</div>
    <div class="reg-sub">Takes 60 seconds · No credit card required</div>
    <div id="regErr" class="reg-err"></div>
    <form id="regModalForm">
      <input type="hidden" id="regRef" name="ref" value="">
      <div class="reg-field">
        <label class="reg-label">First Name</label>
        <input class="reg-input" type="text" id="regFirstName" placeholder="John" required autocomplete="given-name">
      </div>
      <div class="reg-field">
        <label class="reg-label">Email Address</label>
        <input class="reg-input" type="email" id="regEmail" placeholder="john@example.com" required autocomplete="email">
      </div>
      <div class="reg-field">
        <label class="reg-label">Username <span style="font-weight:400;letter-spacing:0;text-transform:none;color:rgba(200,220,255,0.3)">— becomes your referral ID</span></label>
        <input class="reg-input" type="text" id="regUsername" placeholder="johnsmith99" required autocomplete="off" pattern="[a-zA-Z0-9_]{3,30}">
      </div>
      <div class="reg-row">
        <div class="reg-field">
          <label class="reg-label">Password</label>
          <input class="reg-input" type="password" id="regPw" placeholder="Min. 8 chars" required minlength="8" autocomplete="new-password">
        </div>
        <div class="reg-field">
          <label class="reg-label">Confirm</label>
          <input class="reg-input" type="password" id="regPwC" placeholder="Repeat" required autocomplete="new-password">
        </div>
      </div>
      <div class="reg-field" id="regSponsorField" style="display:none">
        <label class="reg-label">Referred by</label>
        <input class="reg-input" type="text" id="regSponsor" placeholder="Sponsor username" autocomplete="off" readonly style="opacity:0.6">
      </div>
      <div class="reg-terms">
        <input type="checkbox" id="regTerms" required>
        <div>I agree to the <a href="/legal" target="_blank">Terms of Service</a> and <a href="/legal" target="_blank">Privacy Policy</a>.</div>
      </div>
      <button type="submit" class="reg-submit" id="regBtn">Register Here →</button>
    </form>
    <div class="reg-login">Already have an account? <a href="#" onclick="closeRegModal();openLoginModal();return false;">Log in here →</a></div>
  </div>
</div>


<div class="hero">
  <a href="/dashboard" style="display:inline-block;margin-bottom:16px;font-size:14px;font-weight:600;color:rgba(200,220,255,0.6);text-decoration:none;border:1px solid rgba(200,220,255,0.15);border-radius:7px;padding:7px 16px;transition:all 0.2s">← Back to Dashboard</a>
  <div class="hero-badge">Live Interactive Demo</div>
  <h1>Profit Engine Grid<br><span>Visualiser</span></h1>
  <p>Watch your grid fill with a realistic mix of your own <strong style="color:#10b981">direct referrals</strong> and <strong style="color:#00d4ff">upline overspill</strong> — scattered randomly across every level, just like the real thing.</p>
</div>

<div class="pkg-bar" id="pkgBar">
  <button class="pkg-btn" data-price="20"   onclick="selectPkg(this)">$20</button>
  <button class="pkg-btn" data-price="50"   onclick="selectPkg(this)">$50</button>
  <button class="pkg-btn active" data-price="100"  onclick="selectPkg(this)">$100</button>
  <button class="pkg-btn" data-price="200"  onclick="selectPkg(this)">$200</button>
  <button class="pkg-btn" data-price="400"  onclick="selectPkg(this)">$400</button>
  <button class="pkg-btn" data-price="600"  onclick="selectPkg(this)">$600</button>
  <button class="pkg-btn" data-price="800"  onclick="selectPkg(this)">$800</button>
  <button class="pkg-btn" data-price="1000" onclick="selectPkg(this)">$1,000</button>
</div>

<div class="main">

  <!-- LEFT -->
  <div class="grid-panel">
    <div class="panel-eyebrow">Stream 02 — Profit Engine Grid</div>
    <div class="panel-title" id="panelTitle">8×8 GRID — $100 PRO TIER</div>

    <div class="level-labels" id="levelLabels"></div>
    <div class="grid-wrap"   id="gridWrap"></div>

    <!-- Controls -->
    <div class="controls">
      <button class="btn btn-play"  id="playBtn" onclick="togglePlay()">▶ PLAY</button>
      <button class="btn btn-reset" onclick="resetGrid()">↺ RESET</button>
      <div class="speed-wrap">
        <span class="speed-label">Speed</span>
        <input type="range" min="1" max="5" value="3" id="speedSlider">
      </div>
    </div>

    <!-- Direct count slider -->
    <div class="direct-panel">
      <div class="direct-panel-top">
        <div>
          <div class="direct-panel-label">Your Personal Direct Referrals</div>
          <div class="direct-panel-sub">Randomly placed across all 8 levels — the rest is upline overspill</div>
        </div>
        <div style="text-align:right">
          <div class="direct-count-big" id="directCountDisplay">15</div>
          <div class="direct-count-caption">of 63 seats</div>
        </div>
      </div>
      <input type="range" min="0" max="63" value="15" id="directSlider"
             style="width:100%;accent-color:#10b981" oninput="updateDirectCount(this.value)">
      <div style="display:flex;justify-content:space-between;margin-top:4px;font-size:17px;color:rgba(255,255,255,0.2)">
        <span>0 directs</span><span>~30 directs</span><span>All 63</span>
      </div>
      <div class="legend-row">
        <div class="legend-item">
          <div class="legend-swatch" style="background:linear-gradient(135deg,#10b981,#059669);border:1px solid rgba(52,211,153,0.5)"></div>
          Direct referral · you earn $<span id="legendDirect">33.75</span>
        </div>
        <div class="legend-item">
          <div class="legend-swatch" style="background:#3b82f6;opacity:0.8"></div>
          Upline overspill · you earn $<span id="legendOverspill">8.75</span>
        </div>
      </div>
    </div>

    <!-- Progress -->
    <div class="progress-wrap">
      <div class="progress-row">
        <span class="progress-label">Grid Progress</span>
        <span class="progress-value" id="progressVal">0 / 63 seats filled</span>
      </div>
      <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
    </div>

    <!-- Advance note -->
    <div class="advance-note">
      <div style="font-size:18px;flex-shrink:0">♾️</div>
      <div>
        <div class="advance-note-title">Recurring Income Engine</div>
        <div class="advance-note-text">Once all 63 seats fill, your grid auto-advances with a fresh random pattern — directs and overspill redistributed — and the commissions start flowing again immediately.</div>
      </div>
    </div>

    <div class="advance-banner" id="advanceBanner">
      <div class="advance-title">⚡ GRID COMPLETE — NEW ADVANCE STARTING</div>
      <div class="advance-sub" id="advanceSubText"></div>
    </div>
  </div>

  <!-- RIGHT -->
  <div class="right-col">

    <!-- Tracker -->
    <div class="stat-card">
      <div class="eyebrow">Live Earnings Tracker</div>

      <div class="earn-row">
        <div class="earn-left">
          <div class="earn-dot" style="background:#10b981"></div>
          <div>
            <div class="earn-label">Direct Sponsor (25%)</div>
            <div class="earn-sub">$<span id="directPerSeat">25.00</span> · your personal referrals only</div>
          </div>
        </div>
        <div class="earn-amount" id="sponsorAmt" style="color:#10b981">$0.00</div>
      </div>

      <div class="earn-row">
        <div class="earn-left">
          <div class="earn-dot" style="background:#a78bfa"></div>
          <div>
            <div class="earn-label">Uni-Level (8.75%)</div>
            <div class="earn-sub">$<span id="uniPerSeat">8.75</span> · every seat, direct or overspill</div>
          </div>
        </div>
        <div class="earn-amount" id="uniAmt" style="color:#a78bfa">$0.00</div>
      </div>

    </div>

    <!-- Total -->
    <div class="total-card">
      <div class="total-label">Your Total This Advance</div>
      <div class="total-amount" id="totalAmt">$0.00</div>
      <div class="total-sub">Direct Sponsor + Uni-Level · <span id="directFilled">0</span> directs / <span id="overspillFilled">0</span> overspill so far</div>
    </div>

    <!-- Split bar -->
    <div class="split-card">
      <div class="eyebrow">Per Entry Distribution — $<span id="splitPrice">100</span></div>
      <div class="split-bar-wrap">
        <div class="split-seg" style="width:26.3%;background:#10b981"></div>
        <div class="split-seg" style="width:73.7%;background:linear-gradient(90deg,#3b82f6,#a78bfa)"></div>
      </div>
      <div class="split-legend">
        <div class="split-item">
          <div class="split-swatch" style="background:#10b981"></div>
          Direct Sponsor
          <span class="split-pct" id="sp1" style="color:#10b981">$25.00</span>
        </div>
        <div class="split-item">
          <div class="split-swatch" style="background:linear-gradient(135deg,#3b82f6,#a78bfa)"></div>
          Uni-Level (8 levels × $<span id="sp2lvl">8.75</span>)
          <span class="split-pct" id="sp2" style="color:#a78bfa">$70.00</span>
        </div>
      </div>
    </div>

    <!-- Package summary -->
    <div class="info-strip">
      <div class="info-title">Campaign Tier Summary</div>
      <div class="info-row">
        <span class="info-key">Tier price</span>
        <span class="info-val" id="infoPkg" style="color:var(--cyan)">$100 Pro</span>
      </div>
      <div class="info-row">
        <span class="info-key">Your directs this advance</span>
        <span class="info-val" id="infoDirectCount" style="color:#10b981">15 seats</span>
      </div>
      <div class="info-row">
        <span class="info-key">Overspill seats</span>
        <span class="info-val" id="infoOverspillCount" style="color:#a78bfa">48 seats</span>
      </div>
      <div class="info-row">
        <span class="info-key">Estimated full advance earnings</span>
        <span class="info-val" id="infoMax" style="color:var(--gold)">$926.25</span>
      </div>
    </div>

    <!-- Log -->
    <div class="log-card">
      <div class="eyebrow">Activity Log</div>
      <div class="log-list" id="logList">
        <div class="log-item"><span style="color:rgba(255,255,255,0.2)">Waiting for grid to start...</span><span></span></div>
      </div>
    </div>

  </div>
</div>

<script>
// ── State ──────────────────────────────────────────────────────────────────
let pkg         = 100;
let cells       = [];
let filled      = 0;
let directFilled = 0;
let playing     = false;
let timer       = null;
let directCount = 15;       // how many of the 63 seats are your personal referrals
let directSeats = new Set(); // which seat indices (1–63) are directs — randomised each reset

// Running totals
let tSponsor = 0, tUni = 0;

const LEVEL_COLOURS = [
  '#00d4ff','#3b82f6','#6366f1','#7c3aed',
  '#8b5cf6','#a78bfa','#b197fc','#c4b5fd'
];

// ── Randomise which seats are personal directs ─────────────────────────────
function randomiseDirects() {
  directSeats.clear();
  // Fisher-Yates shuffle of seats 1–63, pick first directCount
  const pool = Array.from({length:63}, (_,i) => i+1);
  for (let i = 62; i > 0; i--) {
    const j = Math.floor(Math.random() * (i+1));
    [pool[i], pool[j]] = [pool[j], pool[i]];
  }
  for (let i = 0; i < directCount; i++) directSeats.add(pool[i]);
}

// ── Tier / direct-count controls ───────────────────────────────────────
function selectPkg(btn) {
  document.querySelectorAll('.pkg-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  pkg = parseFloat(btn.dataset.price);
  updateSplitDisplay();
  resetGrid();
}

function updateDirectCount(val) {
  directCount = parseInt(val);
  document.getElementById('directCountDisplay').textContent = directCount;
  updateSplitDisplay();
  resetGrid();
}

function updateSplitDisplay() {
  const direct   = pkg * 0.25;
  const perLevel = pkg * 0.70 / 8;
  const uniTotal = pkg * 0.70;
  const overspill = 63 - directCount;
  // Your earnings: each direct = direct+perLevel, each overspill = perLevel
  const est = (directCount * (direct + perLevel)) + (overspill * perLevel);

  document.getElementById('splitPrice').textContent   = pkg.toLocaleString();
  document.getElementById('sp1').textContent          = '$' + direct.toFixed(2);
  document.getElementById('sp2lvl').textContent       = perLevel.toFixed(2);
  document.getElementById('sp2').textContent          = '$' + uniTotal.toFixed(2);
  document.getElementById('infoPkg').textContent      = '$' + pkg.toLocaleString();
  document.getElementById('infoDirectCount').textContent  = directCount + ' seats';
  document.getElementById('infoOverspillCount').textContent = overspill + ' seats';
  document.getElementById('infoMax').textContent      = '$' + est.toLocaleString('en',{minimumFractionDigits:2,maximumFractionDigits:2});
  document.getElementById('panelTitle').textContent   = `8×8 GRID — $${pkg.toLocaleString()} PACKAGE`;
  document.getElementById('directPerSeat').textContent = direct.toFixed(2);
  document.getElementById('uniPerSeat').textContent   = perLevel.toFixed(2);
  document.getElementById('legendDirect').textContent = (direct + perLevel).toFixed(2);
  document.getElementById('legendOverspill').textContent = perLevel.toFixed(2);
}

// ── Build grid ─────────────────────────────────────────────────────────────
function buildGrid() {
  const wrap   = document.getElementById('gridWrap');
  const labels = document.getElementById('levelLabels');
  wrap.innerHTML = ''; labels.innerHTML = ''; cells = [];

  for (let l = 0; l < 8; l++) {
    const lbl = document.createElement('div');
    lbl.className  = 'level-label';
    lbl.textContent = 'L' + (l+1);
    lbl.style.color = LEVEL_COLOURS[l] + '70';
    labels.appendChild(lbl);
  }

  for (let i = 0; i < 64; i++) {
    const c = document.createElement('div');
    c.className = 'cell';
    if (i === 0) {
      c.classList.add('owner');
      c.innerHTML = '<span style="font-size:clamp(12px,1.4vw,17px);font-weight:800;line-height:1.3;color:#fff">YOU</span>';
    }
    wrap.appendChild(c);
    cells.push(c);
  }
}

// ── Playback ───────────────────────────────────────────────────────────────
function togglePlay() { playing ? pause() : play(); }

function play() {
  playing = true;
  document.getElementById('playBtn').textContent = '⏸ PAUSE';
  tick();
}

function pause() {
  playing = false;
  clearTimeout(timer);
  document.getElementById('playBtn').textContent = '▶ PLAY';
}

function getDelay() {
  const v = parseInt(document.getElementById('speedSlider').value);
  return Math.round(700 - (v-1) * 150); // 700ms (slow) → 100ms (fast)
}

function tick() {
  if (!playing) return;
  if (filled >= 63) { gridAdvance(); return; }
  fillNext();
  timer = setTimeout(tick, getDelay());
}

// ── Fill one seat ──────────────────────────────────────────────────────────
function fillNext() {
  filled++;
  const cell     = cells[filled];
  const level    = Math.floor((filled - 1) / 8);  // 0 = L1 … 7 = L8
  const isDirect = directSeats.has(filled);
  const perLevel = pkg * 0.70 / 8;   // $8.75 on $100

  // ── COMMISSION LOGIC ──────────────────────────────────────────────────
  // Every seat pays you ONE uni-level position ($8.75 on $100).
  // If this seat is YOUR personal direct referral, you also receive
  // the 25% direct sponsor commission ($25 on $100).
  // ─────────────────────────────────────────────────────────────────────
  let youEarn = perLevel;
  if (isDirect) {
    tSponsor += pkg * 0.25;
    youEarn  += pkg * 0.25;
    directFilled++;
  }
  tUni      += perLevel;

  // Visual style
  const col = LEVEL_COLOURS[level];
  cell.classList.add('filled', isDirect ? 'direct' : 'overspill', 'pop');
  if (isDirect) {
    cell.style.background  = 'linear-gradient(135deg,#10b981,#059669)';
    cell.style.borderColor = 'rgba(52,211,153,0.7)';
    cell.style.boxShadow   = '0 0 18px rgba(16,185,129,0.55),0 0 36px rgba(16,185,129,0.18)';
    cell.style.color       = '#fff';
  } else {
    cell.style.background  = col;
    cell.style.borderColor = col + '40';
    cell.style.boxShadow   = `0 0 10px ${col}45`;
    cell.style.color       = 'rgba(255,255,255,0.9)';
  }
  cell.innerHTML = `+$${youEarn.toFixed(2)}`;
  setTimeout(() => cell.classList.remove('pop'), 450);

  // Update panels
  bump('sponsorAmt', tSponsor);
  bump('uniAmt',     tUni);
  document.getElementById('totalAmt').textContent = '$' + (tSponsor + tUni).toFixed(2);
  document.getElementById('directFilled').textContent   = directFilled;
  document.getElementById('overspillFilled').textContent = filled - directFilled;

  const pct = Math.round((filled / 63) * 100);
  document.getElementById('progressVal').textContent = `${filled} / 63 seats filled`;
  document.getElementById('progressFill').style.width = pct + '%';

  addLog(filled, level+1, isDirect, youEarn, isDirect ? '#10b981' : col);
}

// ── Helpers ────────────────────────────────────────────────────────────────
function bump(id, val) {
  const el = document.getElementById(id);
  el.textContent = '$' + val.toFixed(2);
  el.classList.remove('bump');
  void el.offsetWidth;
  el.classList.add('bump');
}

function addLog(seat, level, isDirect, amt, col) {
  const list = document.getElementById('logList');
  if (list.querySelector('[style*="0.2"]')) list.innerHTML = '';
  const tag   = isDirect
    ? '<span class="log-tag direct">DIRECT</span>'
    : '<span class="log-tag overspill">OVERSPILL</span>';
  const item  = document.createElement('div');
  item.className = 'log-item';
  item.innerHTML = `<span>Seat #${String(seat).padStart(2,'0')} · L${level} ${tag}</span><span class="log-amt" style="color:${col}">+$${amt.toFixed(2)}</span>`;
  list.insertBefore(item, list.firstChild);
  while (list.children.length > 12) list.removeChild(list.lastChild);
}

// ── Advance complete ─────────────────────────────────────────────────────────
function gridAdvance() {
  pause();
  const earned = (tSponsor + tUni).toFixed(2);
  document.getElementById('advanceSubText').textContent =
    `You earned $${earned} — ${directFilled} directs + ${63 - directFilled} overspill. New advance in 3 seconds with a fresh random mix...`;
  document.getElementById('advanceBanner').classList.add('show');
  setTimeout(() => {
    document.getElementById('advanceBanner').classList.remove('show');
    resetGrid();
    setTimeout(play, 500);
  }, 3500);
}

// ── Reset ──────────────────────────────────────────────────────────────────
function resetGrid() {
  pause();
  filled = 0; directFilled = 0;
  tSponsor = 0; tUni = 0;
  randomiseDirects();
  buildGrid();
  ['sponsorAmt','uniAmt'].forEach(id =>
    document.getElementById(id).textContent = '$0.00'
  );
  document.getElementById('totalAmt').textContent         = '$0.00';
  document.getElementById('progressVal').textContent      = '0 / 63 seats filled';
  document.getElementById('progressFill').style.width     = '0%';
  document.getElementById('directFilled').textContent     = '0';
  document.getElementById('overspillFilled').textContent  = '0';
  document.getElementById('logList').innerHTML            =
    '<div class="log-item"><span style="color:rgba(255,255,255,0.2)">Waiting for grid to start...</span><span></span></div>';
  document.getElementById('advanceBanner').classList.remove('show');
  document.getElementById('playBtn').textContent          = '▶ PLAY';
}

// ── Init ───────────────────────────────────────────────────────────────────
updateSplitDisplay();
randomiseDirects();
buildGrid();
</script>

<!-- ── Mobile Bottom Nav ── -->
<div class="mobile-nav">
  <div class="mobile-nav-inner">
    <a href="/dashboard" class="mob-nav-item"><span class="mob-nav-icon">⊞</span><span class="mob-nav-label">Home</span></a>
    <a href="/watch" class="mob-nav-item"><span class="mob-nav-icon">▶</span><span class="mob-nav-label">Watch</span></a>
    <a href="/income-grid" class="mob-nav-item active"><span class="mob-nav-icon">⚡</span><span class="mob-nav-label">Grid</span></a>
    <a href="/wallet" class="mob-nav-item"><span class="mob-nav-icon">◎</span><span class="mob-nav-label">Wallet</span></a>
    <a href="/account" class="mob-nav-item"><span class="mob-nav-icon">◉</span><span class="mob-nav-label">Account</span></a>
  </div>
</div>

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/static/sw.js').catch(() => {});
  });
}
</script>
</body>
</html>
