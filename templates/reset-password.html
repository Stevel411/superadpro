<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reset Password ‚Äî SuperAdPro</title>
<link href="https://fonts.googleapis.com/css2?family=Rethink+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Rethink Sans',sans-serif;background:#050d1a;color:#e8f0fe;min-height:100vh;display:flex;flex-direction:column}

nav{display:flex;align-items:center;justify-content:space-between;padding:0 36px;height:60px;background:rgba(10,18,40,0.9);border-bottom:1px solid rgba(0,180,216,0.12)}
.nav-logo{display:flex;align-items:center;gap:9px;text-decoration:none}
.nav-brand{font-weight:800;font-size:19px;letter-spacing:2px;text-transform:uppercase;background:linear-gradient(135deg,#00b4d8,#6d28d9);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}

.page{flex:1;display:flex;align-items:center;justify-content:center;padding:48px 24px}
.card{background:rgba(10,18,40,0.95);border:1px solid rgba(0,180,216,0.18);border-radius:14px;padding:44px 40px;width:100%;max-width:440px}
.icon-wrap{width:56px;height:56px;background:rgba(0,180,216,0.1);border:1px solid rgba(0,180,216,0.25);border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:26px;margin-bottom:22px}
h1{font-size:36px;font-weight:800;color:#fff;margin-bottom:8px}
.subtitle{font-size:21px;color:rgba(200,220,255,0.65);line-height:1.6;margin-bottom:28px}

label{display:block;font-size:21px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:rgba(200,220,255,0.6);margin-bottom:7px}
input{width:100%;background:rgba(0,0,0,0.35);border:1px solid rgba(0,180,216,0.2);border-radius:8px;padding:13px 16px;font-family:'Rethink Sans',sans-serif;font-size:19px;color:#fff;outline:none;transition:all 0.25s}
input:focus{border-color:#00b4d8;box-shadow:0 0 0 3px rgba(0,180,216,0.12)}
input::placeholder{color:rgba(200,220,255,0.25)}

.password-wrap{position:relative}
.toggle-pw{position:absolute;right:14px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;font-size:19px;color:rgba(200,220,255,0.4);padding:4px;transition:color 0.2s}
.toggle-pw:hover{color:#00b4d8}

.strength-bar{height:4px;border-radius:999px;background:rgba(255,255,255,0.08);margin-top:8px;overflow:hidden}
.strength-fill{height:100%;border-radius:999px;transition:all 0.3s;width:0}
.strength-label{font-size:19px;color:rgba(200,220,255,0.45);margin-top:5px}

.btn{width:100%;padding:14px;background:linear-gradient(135deg,#00b4d8,#6d28d9);border:none;border-radius:8px;font-family:'Rethink Sans',sans-serif;font-size:19px;font-weight:700;color:#fff;cursor:pointer;transition:all 0.3s;margin-top:22px}
.btn:hover{box-shadow:0 0 32px rgba(0,180,216,0.35);transform:translateY(-1px)}
.btn:disabled{opacity:0.5;cursor:not-allowed;transform:none}

.alert-error{background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.25);border-radius:8px;padding:13px 16px;font-size:21px;color:#fca5a5;margin-bottom:20px;line-height:1.5}
.alert-expired{background:rgba(245,158,11,0.1);border:1px solid rgba(245,158,11,0.25);border-radius:8px;padding:16px 18px;font-size:21px;color:#fbbf24;margin-bottom:20px;line-height:1.6}
.alert-success{background:rgba(22,163,74,0.1);border:1px solid rgba(22,163,74,0.25);border-radius:8px;padding:16px 18px;font-size:21px;color:#4ade80;margin-bottom:20px;line-height:1.6}

.back-link{display:flex;align-items:center;gap:6px;font-size:19px;color:rgba(200,220,255,0.5);text-decoration:none;margin-top:22px;justify-content:center;transition:color 0.2s}
.back-link:hover{color:#00b4d8}
</style>
</head>
<body>

<svg width="0" height="0" style="position:absolute">
  <defs>
    <symbol id="shield" viewBox="0 0 100 100">
      <defs>
        <linearGradient id="hexgrad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#4f8ef7"/><stop offset="50%" stop-color="#6d28d9"/><stop offset="100%" stop-color="#00b4d8"/>
        </linearGradient>
        <linearGradient id="hexinner" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#1a3a8f"/><stop offset="100%" stop-color="#0d1a5c"/>
        </linearGradient>
      </defs>
      <polygon points="50,3 93,27 93,73 50,97 7,73 7,27" fill="url(#hexgrad)"/>
      <polygon points="50,12 84,31 84,69 50,88 16,69 16,31" fill="url(#hexinner)"/>
      <text x="50" y="63" text-anchor="middle" font-family="Arial Black,sans-serif" font-weight="900" font-size="38" fill="#00d4ff" letter-spacing="-2">S</text>
    </symbol>
  </defs>
</svg>

<nav>
  <a href="/" class="nav-logo">
    <svg width="32" height="32"><use href="#shield"/></svg>
    <span class="nav-brand">SuperAdPro</span>
  </a>
</nav>

<div class="page">
  <div class="card">

    {% if expired %}
    <div class="icon-wrap">‚è±</div>
    <h1>Link Expired</h1>
    <div class="alert-expired">
      This reset link has expired or already been used. Reset links are valid for 1 hour.
    </div>
    <a href="/forgot-password" class="btn" style="display:block;text-align:center;text-decoration:none;padding:14px">
      Request a New Link ‚Üí
    </a>
    <a href="/login" class="back-link">‚Üê Back to Login</a>

    {% elif success %}
    <div class="icon-wrap">‚úÖ</div>
    <h1>Password Updated!</h1>
    <div class="alert-success">
      Your password has been changed successfully. You can now log in with your new password.
    </div>
    <a href="/login" class="btn" style="display:block;text-align:center;text-decoration:none;padding:14px">
      Log In Now ‚Üí
    </a>

    {% else %}
    <div class="icon-wrap">üîê</div>
    <h1>Set New Password</h1>
    <p class="subtitle">Choose a strong password of at least 8 characters.</p>

    {% if error %}
    <div class="alert-error">{{ error }}</div>
    {% endif %}

    <form method="POST" action="/reset-password">
      <input type="hidden" name="token" value="{{ token }}">

      <div style="margin-bottom:20px">
        <label for="password">New Password</label>
        <div class="password-wrap">
          <input type="password" id="password" name="password"
                 placeholder="At least 8 characters" required
                 oninput="checkStrength(this.value)" autocomplete="new-password">
          <button type="button" class="toggle-pw" onclick="togglePw('password', this)">üëÅ</button>
        </div>
        <div class="strength-bar"><div class="strength-fill" id="strengthFill"></div></div>
        <div class="strength-label" id="strengthLabel">Enter a password</div>
      </div>

      <div style="margin-bottom:4px">
        <label for="confirm_password">Confirm New Password</label>
        <div class="password-wrap">
          <input type="password" id="confirm_password" name="confirm_password"
                 placeholder="Repeat your password" required
                 oninput="checkMatch()" autocomplete="new-password">
          <button type="button" class="toggle-pw" onclick="togglePw('confirm_password', this)">üëÅ</button>
        </div>
        <div class="strength-label" id="matchLabel"></div>
      </div>

      <button type="submit" class="btn" id="submitBtn">Update Password ‚Üí</button>
    </form>

    <a href="/login" class="back-link">‚Üê Back to Login</a>
    {% endif %}

  </div>
</div>

<script>
function togglePw(id, btn) {
  const input = document.getElementById(id);
  input.type = input.type === 'password' ? 'text' : 'password';
  btn.textContent = input.type === 'password' ? 'üëÅ' : 'üôà';
}

function checkStrength(pw) {
  const fill  = document.getElementById('strengthFill');
  const label = document.getElementById('strengthLabel');
  let score = 0;
  if (pw.length >= 8)  score++;
  if (pw.length >= 12) score++;
  if (/[A-Z]/.test(pw)) score++;
  if (/[0-9]/.test(pw)) score++;
  if (/[^A-Za-z0-9]/.test(pw)) score++;

  const levels = [
    { pct: '0%',   colour: 'transparent', text: 'Enter a password' },
    { pct: '25%',  colour: '#ef4444',     text: 'Weak' },
    { pct: '50%',  colour: '#f59e0b',     text: 'Fair' },
    { pct: '75%',  colour: '#00b4d8',     text: 'Good' },
    { pct: '100%', colour: '#16a34a',     text: 'Strong' },
  ];
  const lvl = levels[Math.min(score, 4)];
  fill.style.width = lvl.pct;
  fill.style.background = lvl.colour;
  label.textContent = pw.length ? lvl.text : 'Enter a password';
  checkMatch();
}

function checkMatch() {
  const pw  = document.getElementById('password').value;
  const cpw = document.getElementById('confirm_password').value;
  const lbl = document.getElementById('matchLabel');
  const btn = document.getElementById('submitBtn');
  if (!cpw) { lbl.textContent = ''; btn.disabled = false; return; }
  const ok = pw === cpw;
  lbl.textContent = ok ? '‚úì Passwords match' : '‚úó Passwords do not match';
  lbl.style.color = ok ? '#4ade80' : '#f87171';
  btn.disabled = !ok;
}
</script>
</body>
</html>
