<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>My Campaigns â€” SuperAdPro</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800&family=Rethink+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'DM Sans','Rethink Sans',sans-serif;background:#f0f2f8;color:#0f172a;min-height:100vh;display:flex}
.sidebar{width:224px;height:100vh;background:#0a0a1a;border-right:1px solid rgba(0,212,255,0.08);position:fixed;top:0;left:0;z-index:100;display:flex;flex-direction:column;overflow-y:auto}
.sidebar-logo{display:flex;align-items:center;gap:10px;padding:20px 18px;border-bottom:1px solid rgba(255,255,255,0.06);text-decoration:none}
.sidebar-brand{font-family:Sora,sans-serif;font-weight:800;font-size:16px;letter-spacing:0;text-transform:none;color:#fff;-webkit-text-fill-color:#fff}
.nav-section{padding:18px 16px 5px;font-size:9px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:rgba(0,212,255,0.3)}
.nav-item{display:flex;align-items:center;gap:11px;padding:12px 18px;font-size:16px;font-weight:500;color:rgba(200,220,255,0.75);text-decoration:none;border-left:2px solid transparent;transition:all 0.2s}
.nav-item:hover{color:#38bdf8;background:rgba(56,189,248,0.06);border-left-color:rgba(56,189,248,0.3)}
.nav-item.active{color:#38bdf8;background:rgba(56,189,248,0.07);border-left-color:#38bdf8}
.nav-icon{font-size:16px;width:18px;text-align:center;flex-shrink:0}
.sidebar-footer{margin-top:auto;padding:14px 12px;border-top:1px solid rgba(255,255,255,0.06)}
.user-mini{display:flex;align-items:center;gap:10px;padding:10px 12px;background:rgba(56,189,248,0.05);border:1px solid rgba(0,212,255,0.1);border-radius:8px}
.user-avatar{width:34px;height:34px;border-radius:50%;background:linear-gradient(135deg,#0ea5e9,#38bdf8);display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:800;color:#fff;flex-shrink:0}
.sidebar{display:none}
.main{margin-left:0;flex:1;display:flex;flex-direction:column}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:0 28px;height:80px;background:#0a0a1a;border-bottom:1px solid rgba(14,165,233,0.12);position:sticky;top:0;z-index:50}
.topbar-title{font-size:19px;font-weight:800;color:#fff}
.topbar-sub{font-size:19px;color:rgba(0,212,255,0.5);margin-top:2px}
.topbar-right{display:flex;align-items:center;gap:12px}
.balance-pill{display:flex;align-items:center;gap:10px;background:rgba(255,255,255,0.04);border:1px solid rgba(56,189,248,0.15);border-radius:8px;padding:8px 16px}
.balance-label{font-size:19px;color:rgba(255,255,255,0.35);letter-spacing:1.5px;text-transform:uppercase}
.balance-val{font-size:19px;font-weight:800;color:#16a34a;line-height:1}
.content{padding:24px 28px;flex:1}
.btn-primary{font-size:19px;font-weight:700;color:#fff;background:linear-gradient(135deg,#0ea5e9,#38bdf8);padding:10px 22px;border-radius:7px;text-decoration:none;white-space:nowrap;transition:all 0.3s}
.btn-primary:hover{box-shadow:0 4px 20px rgba(0,180,216,0.35);transform:translateY(-1px)}

/* â”€â”€ success banner â”€â”€ */
.success-banner{background:rgba(22,163,74,0.1);border:1px solid rgba(22,163,74,0.25);border-radius:10px;padding:14px 20px;margin-bottom:20px;font-size:19px;color:#4ade80;display:flex;align-items:center;gap:10px}

/* â”€â”€ Campaign grid â”€â”€ */
.campaigns-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:20px;margin-top:4px}
.campaign-card{background:#0a1628;border:1px solid rgba(0,180,216,0.12);border-radius:12px;overflow:hidden;transition:all 0.25s}
.campaign-card:hover{border-color:rgba(0,180,216,0.3);transform:translateY(-2px);box-shadow:0 8px 32px rgba(0,0,0,0.2)}
.video-wrap{position:relative;aspect-ratio:16/9;background:#000}
.video-wrap iframe{width:100%;height:100%;border:none;display:block}
.campaign-body{padding:16px 18px}
.campaign-meta{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.platform-badge{font-size:19px;font-weight:700;padding:3px 9px;border-radius:50px;border:1px solid}
.status-badge{font-size:19px;font-weight:700;padding:3px 9px;border-radius:50px}
.status-active{background:rgba(22,163,74,0.12);color:#4ade80;border:1px solid rgba(22,163,74,0.3)}
.status-paused{background:rgba(245,158,11,0.1);color:#fbbf24;border:1px solid rgba(245,158,11,0.3)}
.campaign-title{font-size:19px;font-weight:700;color:#ffffff;margin-bottom:4px;line-height:1.3}
.campaign-cat{font-size:19px;color:#64748b;margin-bottom:12px;text-transform:capitalize}
.campaign-desc{font-size:19px;color:#4a5a6e;line-height:1.6;margin-bottom:14px}
.campaign-footer{display:flex;align-items:center;justify-content:space-between;padding-top:12px;border-top:1px solid rgba(0,180,216,0.08)}
.campaign-date{font-size:19px;color:rgba(200,220,255,0.35)}
.delete-btn{font-size:19px;font-weight:600;color:rgba(239,68,68,0.6);background:none;border:none;cursor:pointer;font-family:inherit;padding:4px 8px;border-radius:4px;transition:all 0.2s}
.delete-btn:hover{color:#f87171;background:rgba(239,68,68,0.08)}

/* â”€â”€ Empty state â”€â”€ */
.empty-state{text-align:center;padding:80px 20px}
.empty-icon{font-size:48px;margin-bottom:16px}
.empty-title{font-size:19px;font-weight:700;color:#0f172a;margin-bottom:8px}
.empty-sub{font-size:19px;color:#4a5a6e;margin-bottom:24px;line-height:1.6;max-width:400px;margin-left:auto;margin-right:auto}

/* â”€â”€ Confirm modal â”€â”€ */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.7);z-index:999;align-items:center;justify-content:center}
.modal-overlay.open{display:flex}
.modal{background:#0a1628;border:1px solid rgba(0,180,216,0.2);border-radius:14px;padding:36px;max-width:400px;width:90%;text-align:center}
.modal h3{font-size:19px;font-weight:800;color:#fff;margin-bottom:10px}
.modal p{font-size:19px;color:rgba(200,220,255,0.65);margin-bottom:28px;line-height:1.6}
.modal-btns{display:flex;gap:12px;justify-content:center}
.modal-cancel{font-size:19px;font-weight:600;color:rgba(200,220,255,0.65);background:rgba(255,255,255,0.05);border:1px solid rgba(0,180,216,0.15);border-radius:7px;padding:10px 24px;cursor:pointer;font-family:inherit}
.modal-confirm{font-size:19px;font-weight:700;color:#fff;background:rgba(239,68,68,0.8);border:none;border-radius:7px;padding:10px 24px;cursor:pointer;font-family:inherit}
.modal-confirm:hover{background:rgba(239,68,68,1)}

@media(max-width:768px){.main{margin-left:0}.campaigns-grid{grid-template-columns:1fr}}
</style>
  <link rel="stylesheet" href="/static/mobile.css">
  <link rel="manifest" href="/static/manifest.json">
  <meta name="theme-color" content="#0a0a1a">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="SuperAdPro">
  <link rel="apple-touch-icon" href="/static/icons/icon-192.png">
</head>
<body>
<!-- â”€â”€ Mobile Topbar â”€â”€ -->
<div class="mobile-topbar">
  <a class="mobile-topbar-left" href="/dashboard">
    <svg width="26" height="26" viewBox="0 0 100 100">
      <defs>
        <linearGradient id="mhg" x1="0" y1="0" x2="44" y2="44" gradientUnits="userSpaceOnUse"><stop stop-color="#0ea5e9"/><stop offset="1" stop-color="#38bdf8"/></linearGradient>
      </defs>
      <circle cx="22" cy="22" r="20" fill="url(#mhg)"/><path d="M18 13l14 9-14 9V13z" fill="#fff"/>
    </svg>
    <div>
      <div class="mobile-topbar-name">SuperAdPro</div>
      <div class="mobile-topbar-page">Video Hub</div>
    </div>
  </a>
  <div class="mobile-balance-chip">${{ '%.2f'|format(balance) }} USDT</div>
</div>


<svg width="0" height="0" style="position:absolute">
  <defs>
    <linearGradient id="logo-grad-pg" x1="0" y1="0" x2="44" y2="44" gradientUnits="userSpaceOnUse">
      <stop stop-color="#0ea5e9"/>
      <stop offset="1" stop-color="#38bdf8"/>
    </linearGradient>
    <symbol id="shield" viewBox="0 0 44 44">
      <circle cx="22" cy="22" r="20" fill="url(#logo-grad-pg)"/>
      <path d="M18 13l14 9-14 9V13z" fill="#fff"/>
    </symbol>
  </defs>
</svg>

<div class="main">
  <div class="topbar">
    <div style="display:flex;align-items:center;gap:16px">
      <a href="/dashboard" style="display:flex;align-items:center;gap:6px;color:#64748b;text-decoration:none;font-size:14px;font-weight:600;padding:6px 12px;border:1px solid rgba(255,255,255,0.1);border-radius:6px;transition:all 0.2s" onmouseover="this.style.borderColor='rgba(0,212,255,0.3)';this.style.color='#38bdf8'" onmouseout="this.style.borderColor='rgba(255,255,255,0.1)';this.style.color='#64748b'">
        <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 1L3 7l7 6"/></svg>
        Dashboard
      </a>
      <div>
        <div class="topbar-title">ðŸŽ¬ My Campaigns</div>
        <div class="topbar-sub">{{ campaigns|length }} campaign{{ 's' if campaigns|length != 1 else '' }} Â· YouTube, Rumble &amp; Vimeo supported</div>
      </div>
    </div>
    <div class="topbar-right">
      <div class="balance-pill">
        <div>
          <div class="balance-label">Balance</div>
          <div><span class="balance-val">${{ '%.2f'|format(balance) }}</span><span style="font-size:19px;color:#6b7d94;margin-left:3px">USDT</span></div>
        </div>
      </div>
      <a href="/upload" class="btn-primary">+ Add Video</a>
    </div>
    <a href="/" style="display:flex;align-items:center;gap:10px;text-decoration:none">
          <svg width="32" height="32" viewBox="0 0 44 44"><circle cx="22" cy="22" r="20" fill="url(#sap-tb)"/><path d="M18 13l14 9-14 9V13z" fill="#fff"/><defs><linearGradient id="sap-tb" x1="0" y1="0" x2="44" y2="44" gradientUnits="userSpaceOnUse"><stop stop-color="#0ea5e9"/><stop offset="1" stop-color="#38bdf8"/></linearGradient></defs></svg>
          <span style="font-family:Sora,sans-serif;font-size:18px;font-weight:800;color:#fff">Super<span style="color:#38bdf8">Ad</span>Pro</span>
        </a>
  </div>

  <div class="content">

    {% if added %}
    <div class="success-banner">âœ… <strong>Video added!</strong> Your campaign is now live in your library.</div>
    {% endif %}

    {% if campaigns %}
    <div class="campaigns-grid">
      {% for c in campaigns %}
      <div class="campaign-card">

        <!-- Embedded video -->
        <div class="video-wrap">
          <iframe src="{{ c.embed_url }}"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                  allowfullscreen loading="lazy"></iframe>
        </div>

        <div class="campaign-body">
          <div class="campaign-meta">
            <span class="platform-badge" style="color:{{ platform_colour(c.platform) }};border-color:{{ platform_colour(c.platform) }}33;background:{{ platform_colour(c.platform) }}11">
              {{ platform_label(c.platform) }}
            </span>
            <span class="status-badge {% if c.status == 'active' %}status-active{% else %}status-paused{% endif %}">
              {{ c.status|title }}
            </span>
          </div>

          <div class="campaign-title">{{ c.title }}</div>
          {% if c.category %}
          <div class="campaign-cat">{{ c.category|replace('_',' ')|title }}</div>
          {% endif %}
          {% if c.description %}
          <div class="campaign-desc">{{ c.description }}</div>
          {% endif %}

          <div class="campaign-footer">
            <span class="campaign-date">Added {{ c.created_at.strftime('%d %b %Y') }}</span>
            <button class="delete-btn" onclick="confirmDelete({{ c.id }}, '{{ c.title|replace("'","\\'")|truncate(30) }}')">
              ðŸ—‘ Remove
            </button>
          </div>
        </div>

      </div>
      {% endfor %}
    </div>

    {% else %}
    <div class="empty-state">
      <div class="empty-icon">ðŸŽ¬</div>
      <div class="empty-title">No campaigns yet</div>
      <div class="empty-sub">Add your first video from YouTube, Rumble or Vimeo. Paste the link and it appears in your library instantly â€” no file uploads needed.</div>
      <a href="/upload" class="btn-primary">Add Your First Video â†’</a>
    </div>
    {% endif %}

  </div>
</div>

<!-- Delete confirm modal -->
<div class="modal-overlay" id="deleteModal">
  <div class="modal">
    <h3>Remove Campaign?</h3>
    <p id="deleteMsg">This will remove the video from your campaign library.</p>
    <form method="POST" action="/delete-campaign" id="deleteForm">
      <input type="hidden" name="campaign_id" id="deleteCampaignId">
      <div class="modal-btns">
        <button type="button" class="modal-cancel" onclick="closeModal()">Cancel</button>
        <button type="submit" class="modal-confirm">Remove</button>
      </div>
    </form>
  </div>
</div>

<script>
function confirmDelete(id, title) {
  document.getElementById('deleteCampaignId').value = id;
  document.getElementById('deleteMsg').textContent = `Remove "${title}" from your campaign library?`;
  document.getElementById('deleteModal').classList.add('open');
}
function closeModal() {
  document.getElementById('deleteModal').classList.remove('open');
}
document.getElementById('deleteModal').addEventListener('click', function(e) {
  if (e.target === this) closeModal();
});
</script>

<!-- â”€â”€ Mobile Bottom Nav â”€â”€ -->
<div class="mobile-nav">
  <div class="mobile-nav-inner">
        <a href="/dashboard" class="mob-nav-item"><span class="mob-nav-icon">âŠž</span><span class="mob-nav-label">Home</span></a>
    <a href="/watch" class="mob-nav-item"><span class="mob-nav-icon">â–¶</span><span class="mob-nav-label">Watch</span></a>
    <a href="/income-grid" class="mob-nav-item"><span class="mob-nav-icon">âš¡</span><span class="mob-nav-label">Grid</span></a>
    <a href="/wallet" class="mob-nav-item"><span class="mob-nav-icon">â—Ž</span><span class="mob-nav-label">Wallet</span></a>
    <a href="/account" class="mob-nav-item"><span class="mob-nav-icon">â—‰</span><span class="mob-nav-label">Account</span></a>
<a href="/watch" class="mob-nav-item active"><span class="mob-nav-icon">â–¶</span><span class="mob-nav-label">Watch</span></a>
    <a href="/income-grid" class="mob-nav-item"><span class="mob-nav-icon">âš¡</span><span class="mob-nav-label">Grid</span></a>
    <a href="/wallet" class="mob-nav-item"><span class="mob-nav-icon">â—Ž</span><span class="mob-nav-label">Wallet</span></a>
    <a href="/account" class="mob-nav-item"><span class="mob-nav-icon">â—‰</span><span class="mob-nav-label">Account</span></a>
  </div>
</div>

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/static/sw.js').catch(() => {});
  });
}
</script>
</body>
</html>
