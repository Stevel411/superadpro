<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Video Script Generator ‚Äî SuperAdPro</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800&family=Rethink+Sans:wght@400;500;600;700;800&family=Sora:wght@700;800&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'DM Sans','Rethink Sans',sans-serif;background:#f0f2f8;color:#0f172a;min-height:100vh}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:0 28px;height:64px;background:#0a0a1a;border-bottom:1px solid rgba(14,165,233,0.15);position:sticky;top:0;z-index:200}
.topbar-left{display:flex;align-items:center;gap:20px}
.topbar-title{font-size:18px;font-weight:800;color:#fff}
.topbar-sub{font-size:11px;color:rgba(200,220,255,0.4)}
.tb-btn{display:flex;align-items:center;gap:6px;color:#94a3b8;text-decoration:none;font-size:13px;font-weight:600;padding:8px 16px;border:1px solid rgba(255,255,255,0.1);border-radius:8px;background:rgba(255,255,255,0.03);transition:all 0.2s}
.tb-btn:hover{border-color:rgba(56,189,248,0.3);color:#38bdf8}
.topbar-user{display:flex;align-items:center;gap:10px;color:rgba(200,220,255,0.6);font-size:13px}
.topbar-avatar{width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg,#ef4444,#f97316);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:13px;color:#fff}
.content{max-width:960px;margin:0 auto;padding:32px 24px}
.page-hero{background:linear-gradient(135deg,#1a0a2e,#2d1065,#4c1d95);border-radius:20px;padding:36px 32px;margin-bottom:28px;position:relative;overflow:hidden;border:1px solid rgba(139,92,246,0.2)}
.page-hero::after{content:'';position:absolute;top:-40%;right:-10%;width:250px;height:250px;border-radius:50%;background:radial-gradient(circle,rgba(139,92,246,0.12),transparent 70%)}
.page-hero h1{font-size:28px;font-weight:800;color:#fff;margin-bottom:6px;position:relative;z-index:2}
.page-hero p{font-size:15px;color:rgba(221,214,254,0.5);line-height:1.6;position:relative;z-index:2}
.layout{display:grid;grid-template-columns:380px 1fr;gap:24px;align-items:start}
.sidebar{position:sticky;top:88px}
.card{background:#fff;border:1px solid #e2e8f0;border-radius:16px;padding:28px;box-shadow:0 1px 4px rgba(0,40,100,0.04)}
.card-title{font-size:16px;font-weight:800;margin-bottom:18px;display:flex;align-items:center;gap:8px}
.fg{margin-bottom:14px}
.fg label{display:block;font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:#64748b;margin-bottom:5px}
.fg input,.fg textarea,.fg select{width:100%;padding:11px 14px;border:1px solid #e2e8f0;border-radius:10px;font-size:14px;font-family:inherit;color:#0f172a;outline:none;transition:all 0.2s;background:#fff}
.fg input:focus,.fg textarea:focus,.fg select:focus{border-color:#0ea5e9;box-shadow:0 0 0 3px rgba(139,92,246,0.08)}
.fg textarea{resize:vertical;min-height:70px}

.pills{display:flex;gap:6px;flex-wrap:wrap}
.pill{font-size:12px;font-weight:600;padding:8px 14px;border-radius:8px;border:1px solid #e2e8f0;background:#fff;color:#64748b;cursor:pointer;transition:all 0.2s}
.pill:hover{border-color:#0ea5e9;color:#0ea5e9}
.pill.active{background:linear-gradient(135deg,#0284c7,#0ea5e9);color:#fff;border-color:#0ea5e9;box-shadow:0 2px 8px rgba(139,92,246,0.2)}
.pill input{display:none}

/* Duration pills */
.dur-pills{display:flex;gap:6px;flex-wrap:wrap}
.dp{font-size:12px;font-weight:600;padding:8px 14px;border-radius:8px;border:1px solid #e2e8f0;background:#fff;color:#64748b;cursor:pointer;transition:all 0.2s;text-align:center}
.dp:hover{border-color:#ef4444;color:#ef4444}
.dp.active{background:linear-gradient(135deg,#ef4444,#f97316);color:#fff;border-color:#ef4444;box-shadow:0 2px 8px rgba(239,68,68,0.2)}
.dp input{display:none}

.gen-btn{width:100%;padding:14px;background:linear-gradient(135deg,#0284c7,#0ea5e9);color:#fff;font-size:15px;font-weight:700;font-family:inherit;border:none;border-radius:12px;cursor:pointer;transition:all 0.3s;box-shadow:0 4px 16px rgba(139,92,246,0.25);margin-top:4px}
.gen-btn:hover{transform:translateY(-2px);box-shadow:0 6px 24px rgba(139,92,246,0.35)}
.gen-btn:disabled{opacity:0.6;cursor:not-allowed;transform:none}
.gen-msg{text-align:center;margin-top:10px;font-size:13px;font-weight:600;min-height:18px}
.msg-err{color:#ef4444}.msg-ok{color:#059669}
.remaining{text-align:center;font-size:11px;color:#94a3b8;margin-top:8px}

.output-card{background:#fff;border:1px solid #e2e8f0;border-radius:16px;padding:28px;box-shadow:0 1px 4px rgba(0,40,100,0.04);min-height:400px}
.output-title{font-size:16px;font-weight:800;margin-bottom:16px;display:flex;align-items:center;gap:8px}
.output-empty{text-align:center;padding:80px 20px;color:#94a3b8}
.output-empty-icon{font-size:48px;margin-bottom:12px}
.output-content{font-size:14px;color:#334155;line-height:1.7;white-space:pre-wrap;word-wrap:break-word}
.output-content h1,.output-content h2,.output-content h3{font-size:16px;font-weight:800;color:#0f172a;margin:20px 0 8px;padding-top:12px;border-top:1px solid #f1f5f9}
.output-content strong{color:#0f172a}
.output-content hr{border:none;border-top:1px solid #e2e8f0;margin:16px 0}
.copy-row{display:flex;gap:8px;margin-top:16px;padding-top:16px;border-top:1px solid #f1f5f9}
.copy-btn{font-size:13px;font-weight:600;padding:8px 18px;border-radius:8px;border:1px solid #e2e8f0;background:#fff;color:#64748b;cursor:pointer;transition:all 0.2s;font-family:inherit}
.copy-btn:hover{border-color:#0ea5e9;color:#0ea5e9}
.loading{display:none;text-align:center;padding:60px 20px}
.spinner{width:40px;height:40px;border:3px solid #e2e8f0;border-top:3px solid #0ea5e9;border-radius:50%;animation:spin 0.8s linear infinite;margin:0 auto 16px}
@keyframes spin{to{transform:rotate(360deg)}}
.loading-text{font-size:14px;color:#64748b}
@media(max-width:800px){.layout{grid-template-columns:1fr}.sidebar{position:static}}
</style>
</head>
<body>

<div class="layout">
  {% include "_sidebar.html" %}
  <div class="main">

<div class="topbar">
  <div class="topbar-left">
    <a href="/dashboard" class="tb-btn">‚Üê Dashboard</a>
    <div><div class="topbar-title">üé¨ Video Script Generator</div><div class="topbar-sub">AI-powered ¬∑ Marketing Suite</div></div>
  </div>
  <div class="topbar-user"><span>{{ user.username }}</span><div class="topbar-avatar">{{ user.username[0]|upper }}</div></div>
</div>

<div class="content">
  <div class="page-hero">
    <h1>üé¨ AI Video Script Generator</h1>
    <p>Create scroll-stopping video scripts for TikTok, Reels, Shorts and YouTube. From 15-second hooks to 10-minute deep dives ‚Äî just describe your topic and hit generate.</p>
  </div>

  <div class="layout">
    <div class="sidebar">
      <div class="card">
        <div class="card-title">üé¨ Script Settings</div>

        <div class="fg"><label>What is the video about?</label><textarea id="topic" placeholder="e.g. Why 95% of traders lose money, How I earn passive income online, 5 side hustles that actually work..."></textarea></div>

        <div class="fg"><label>Platform</label>
          <div class="pills">
            <label class="pill" data-val="tiktok"><input type="radio" name="platform" value="tiktok">üéµ TikTok</label>
            <label class="pill active" data-val="youtube-short"><input type="radio" name="platform" value="youtube-short" checked>üì∫ YT Short</label>
            <label class="pill" data-val="instagram-reel"><input type="radio" name="platform" value="instagram-reel">üì∏ IG Reel</label>
            <label class="pill" data-val="youtube"><input type="radio" name="platform" value="youtube">‚ñ∂Ô∏è YouTube</label>
          </div>
        </div>

        <div class="fg"><label>Duration</label>
          <div class="dur-pills">
            <label class="dp" data-val="15"><input type="radio" name="duration" value="15">15s</label>
            <label class="dp" data-val="30"><input type="radio" name="duration" value="30">30s</label>
            <label class="dp active" data-val="60"><input type="radio" name="duration" value="60" checked>60s</label>
            <label class="dp" data-val="180"><input type="radio" name="duration" value="180">3 min</label>
            <label class="dp" data-val="300"><input type="radio" name="duration" value="300">5 min</label>
            <label class="dp" data-val="600"><input type="radio" name="duration" value="600">10 min</label>
          </div>
        </div>

        <div class="fg"><label>Style</label>
          <select id="style">
            <option value="educational">üéì Educational / How-To</option>
            <option value="storytelling">üìñ Storytelling / Personal</option>
            <option value="hype">üî• High Energy / Motivational</option>
            <option value="review">‚≠ê Review / Comparison</option>
            <option value="controversial">üí• Controversial / Hot Take</option>
            <option value="tutorial">üõ†Ô∏è Step-by-Step Tutorial</option>
          </select>
        </div>

        <div class="fg"><label>Target Audience (optional)</label><input type="text" id="audience" placeholder="e.g. beginner forex traders, stay-at-home mums, crypto enthusiasts"></div>

        <div class="fg"><label>Call to Action (optional)</label><input type="text" id="cta" placeholder="e.g. Click the link in bio, Join SuperAdPro, Download the free guide"></div>

        <button class="gen-btn" id="genBtn" onclick="generate()">üé¨ Generate Script</button>
        <div class="gen-msg" id="genMsg"></div>
        <div class="remaining" id="remaining"></div>
      </div>
    </div>

    <div>
      <div class="output-card">
        <div class="output-title">üìã Your Video Script</div>
        <div id="emptyState" class="output-empty">
          <div class="output-empty-icon">üé¨</div>
          <div style="font-size:14px">Describe your video topic, pick a platform and duration ‚Äî your complete script with hooks, stage directions and production notes will appear here.</div>
        </div>
        <div id="loadingState" class="loading">
          <div class="spinner"></div>
          <div class="loading-text">Writing your script...</div>
        </div>
        <div id="outputContent" class="output-content" style="display:none"></div>
        <div id="copyRow" class="copy-row" style="display:none">
          <button class="copy-btn" onclick="copyAll()">üìã Copy Script</button>
          <button class="copy-btn" onclick="generate()">üîÑ Regenerate</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
document.querySelectorAll('.pill').forEach(p=>{p.addEventListener('click',()=>{document.querySelectorAll('.pill').forEach(x=>x.classList.remove('active'));p.classList.add('active')})});
document.querySelectorAll('.dp').forEach(p=>{p.addEventListener('click',()=>{document.querySelectorAll('.dp').forEach(x=>x.classList.remove('active'));p.classList.add('active')})});

async function generate(){
  const btn=document.getElementById('genBtn'),msg=document.getElementById('genMsg');
  const topic=document.getElementById('topic').value.trim();
  if(!topic){msg.className='gen-msg msg-err';msg.textContent='Please describe what the video is about.';return}
  const platform=document.querySelector('.pill.active').dataset.val;
  const duration=document.querySelector('.dp.active').dataset.val;
  const style=document.getElementById('style').value;
  const audience=document.getElementById('audience').value.trim();
  const cta=document.getElementById('cta').value.trim();
  btn.disabled=true;btn.textContent='Writing...';msg.textContent='';
  document.getElementById('emptyState').style.display='none';
  document.getElementById('outputContent').style.display='none';
  document.getElementById('copyRow').style.display='none';
  document.getElementById('loadingState').style.display='block';
  try{
    const r=await fetch('/api/video-scripts/generate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({topic,platform,duration,style,audience,cta})});
    const d=await r.json();
    document.getElementById('loadingState').style.display='none';
    if(d.success){
      let html=d.script.replace(/^### (.*$)/gm,'<h3>$1</h3>').replace(/^## (.*$)/gm,'<h2>$1</h2>').replace(/\*\*(.*?)\*\*/g,'<strong>$1</strong>').replace(/---/g,'<hr>').replace(/\[(.*?)\]/g,'<span style="color:#0ea5e9;font-style:italic">[$1]</span>');
      document.getElementById('outputContent').innerHTML=html;
      document.getElementById('outputContent').style.display='block';
      document.getElementById('copyRow').style.display='flex';
      if(d.remaining!==undefined)document.getElementById('remaining').textContent=d.remaining+' generations remaining today';
      msg.className='gen-msg msg-ok';msg.textContent='Script generated!';
    }else{document.getElementById('emptyState').style.display='block';msg.className='gen-msg msg-err';msg.textContent=d.error||'Failed'}
  }catch(e){document.getElementById('loadingState').style.display='none';document.getElementById('emptyState').style.display='block';msg.className='gen-msg msg-err';msg.textContent='Network error'}
  btn.disabled=false;btn.textContent='üé¨ Generate Script';
}
function copyAll(){const t=document.getElementById('outputContent').innerText;navigator.clipboard.writeText(t).then(()=>{const b=document.querySelector('.copy-row .copy-btn');b.textContent='‚úÖ Copied!';setTimeout(()=>b.textContent='üìã Copy Script',2000)})}
</script>
  </div><!-- /main -->
</div><!-- /layout -->
</body>
</html>
