<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Profit Engine Grids â€” SuperAdPro</title>
<link href="https://fonts.googleapis.com/css2?family=Rethink+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#080f1e;color:#e2e8f0;font-family:'Rethink Sans',sans-serif;min-height:100vh}

/* â”€â”€ Top bar â”€â”€ */
.topbar{position:sticky;top:0;z-index:50;background:rgba(6,11,24,0.92);backdrop-filter:blur(16px);border-bottom:1px solid rgba(0,180,216,0.1);padding:0 32px;height:60px;display:flex;align-items:center;justify-content:space-between}
.topbar-left{display:flex;align-items:center;gap:14px}
.back-btn{display:flex;align-items:center;gap:8px;color:#7a96b4;font-size:14px;font-weight:600;text-decoration:none;padding:7px 14px;border-radius:8px;border:1px solid rgba(148,163,184,0.15);transition:all 0.2s}
.back-btn:hover{color:#00d4ff;border-color:rgba(0,180,216,0.3);background:rgba(0,180,216,0.05)}
.topbar-title{font-size:18px;font-weight:800;color:#fff}
.topbar-sub{font-size:12px;color:#8aa4c0}
.balance-chip{background:rgba(22,163,74,0.08);border:1px solid rgba(22,163,74,0.2);border-radius:8px;padding:6px 14px;font-size:13px;font-weight:700;color:#16a34a}

/* â”€â”€ Container â”€â”€ */
.container{max-width:1100px;margin:0 auto;padding:32px 32px 80px}

/* â”€â”€ Page headline â”€â”€ */
.page-headline{text-align:center;margin-bottom:32px}
.page-headline h1{font-size:clamp(26px,4vw,38px);font-weight:800;color:#fff;margin-bottom:6px;background:linear-gradient(135deg,#ffffff,#00d4ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.page-headline p{font-size:15px;color:#8aa4c0;letter-spacing:0.5px}

/* â”€â”€ Hero stats â”€â”€ */
.hero-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-bottom:32px}
.hero-card{background:rgba(15,23,42,0.8);border:1px solid rgba(0,180,216,0.1);border-radius:14px;padding:22px;position:relative;overflow:hidden;transition:all 0.3s}
.hero-card:hover{border-color:rgba(0,180,216,0.25);transform:translateY(-2px)}
.hero-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px}
.hero-card.c1::before{background:linear-gradient(90deg,#00b4d8,#0077a8)}
.hero-card.c2::before{background:linear-gradient(90deg,#6d28d9,#a78bfa)}
.hero-card.c3::before{background:linear-gradient(90deg,#16a34a,#059669)}
.hero-card.c4::before{background:linear-gradient(90deg,#f59e0b,#d97706)}
.hero-label{font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:#8aa4c0;margin-bottom:8px}
.hero-val{font-size:30px;font-weight:800;line-height:1}
.hero-val.cyan{color:#00d4ff}
.hero-val.violet{color:#a78bfa}
.hero-val.green{color:#16a34a}
.hero-val.amber{color:#f59e0b}
.hero-desc{font-size:12px;color:#a0b8d4;margin-top:6px}

/* â”€â”€ Tier tabs â”€â”€ */
.tier-tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:28px}
.tier-tab{padding:9px 18px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:rgba(15,23,42,0.6);font-size:13px;font-weight:700;color:#7a96b4;cursor:pointer;transition:all 0.2s;text-decoration:none}
.tier-tab:hover{border-color:rgba(0,180,216,0.3);color:#00d4ff}
.tier-tab.active{background:linear-gradient(135deg,#00b4d8,#6d28d9);color:#fff;border-color:transparent;box-shadow:0 4px 20px rgba(0,180,216,0.25)}

/* â”€â”€ Grid card â”€â”€ */
.grid-card{background:rgba(15,23,42,0.8);border:1px solid rgba(0,180,216,0.1);border-radius:16px;overflow:hidden;margin-bottom:24px;transition:all 0.3s}
.grid-card:hover{border-color:rgba(0,180,216,0.2)}
.grid-card-head{display:flex;align-items:center;justify-content:space-between;padding:18px 24px;border-bottom:1px solid rgba(0,180,216,0.08);flex-wrap:wrap;gap:10px}
.grid-card-title{font-size:16px;font-weight:800;color:#fff;display:flex;align-items:center;gap:10px}
.grid-card-title .dot{width:8px;height:8px;border-radius:50%;background:#16a34a;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.4}}
.grid-card-meta{display:flex;align-items:center;gap:12px}
.filled-badge{font-size:14px;font-weight:800;color:#00d4ff}
.status-badge{font-size:11px;font-weight:700;letter-spacing:1px;text-transform:uppercase;padding:4px 12px;border-radius:999px;background:rgba(22,163,74,0.1);color:#16a34a;border:1px solid rgba(22,163,74,0.25)}
.grid-card-body{padding:24px}

/* â”€â”€ Progress bar â”€â”€ */
.progress-wrap{margin-bottom:24px}
.progress-bar{height:8px;background:rgba(255,255,255,0.06);border-radius:999px;overflow:hidden;margin-bottom:6px}
.progress-fill{height:100%;border-radius:999px;background:linear-gradient(90deg,#00b4d8,#6d28d9);transition:width 0.8s ease}
.progress-text{font-size:12px;color:#8aa4c0;display:flex;justify-content:space-between}

/* â”€â”€ 8Ã—8 Grid visual â”€â”€ */
.section-label{font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:rgba(0,212,255,0.4);margin-bottom:12px}
.grid-container{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch;padding-bottom:4px;margin-bottom:12px}
.grid-container::-webkit-scrollbar{height:6px}
.grid-container::-webkit-scrollbar-track{background:rgba(255,255,255,0.03);border-radius:3px}
.grid-container::-webkit-scrollbar-thumb{background:rgba(0,180,216,0.2);border-radius:3px}
.grid-8x8{display:grid;grid-template-columns:repeat(8,1fr);gap:5px;min-width:400px}
.g-cell{aspect-ratio:1;border-radius:7px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;transition:all 0.3s}
.g-cell.owner{background:linear-gradient(135deg,#16a34a,#059669);color:#fff;font-size:11px;font-weight:800;box-shadow:0 2px 12px rgba(22,163,74,0.4)}
.g-cell.filled{background:linear-gradient(135deg,rgba(0,180,216,0.2),rgba(109,40,217,0.15));border:1px solid rgba(0,180,216,0.25);color:#00d4ff}
.g-cell.empty{background:rgba(255,255,255,0.02);border:1px dashed rgba(255,255,255,0.08);color:#c8daf0}
.legend{display:flex;gap:16px;margin-bottom:24px;flex-wrap:wrap;justify-content:center}
.legend-item{display:flex;align-items:center;gap:6px;font-size:11px;color:#8aa4c0}
.legend-dot{width:12px;height:12px;border-radius:4px}

/* â”€â”€ Level breakdown â”€â”€ */
.level-row{display:flex;align-items:center;gap:12px;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.03)}
.level-row:last-child{border-bottom:none}
.level-label{font-size:12px;font-weight:700;color:#7a96b4;width:60px;flex-shrink:0}
.level-bar-wrap{flex:1;height:6px;background:rgba(255,255,255,0.04);border-radius:999px;overflow:hidden}
.level-bar{height:100%;border-radius:999px;background:linear-gradient(90deg,#00b4d8,#6d28d9);transition:width 0.5s}
.level-seats{font-size:11px;color:#a0b8d4;width:50px;text-align:right;flex-shrink:0}
.level-earn{font-size:12px;font-weight:800;color:#16a34a;width:70px;text-align:right;flex-shrink:0}

/* â”€â”€ Earnings summary â”€â”€ */
.earnings-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:32px}
.earn-card{background:rgba(15,23,42,0.8);border:1px solid rgba(0,180,216,0.1);border-radius:14px;padding:22px}
.earn-card-title{font-size:14px;font-weight:800;color:#fff;margin-bottom:16px;display:flex;align-items:center;gap:8px}
.earn-row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.04)}
.earn-row:last-child{border-bottom:none}
.earn-label{font-size:13px;color:#7a96b4}
.earn-val{font-size:13px;font-weight:700;color:#00d4ff}
.earn-val.total{font-size:16px;color:#16a34a}

/* â”€â”€ Empty state â”€â”€ */
.empty{text-align:center;padding:60px 32px}
.empty-icon{font-size:48px;margin-bottom:16px}
.empty-title{font-size:22px;font-weight:800;color:#fff;margin-bottom:8px}
.empty-sub{font-size:14px;color:#8aa4c0;line-height:1.7;max-width:500px;margin:0 auto 24px}
.empty-cta{display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#00b4d8,#6d28d9);color:#fff;font-size:14px;font-weight:700;border-radius:8px;text-decoration:none;transition:all 0.2s}
.empty-cta:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,180,216,0.3)}

/* â”€â”€ Responsive â”€â”€ */
@media(max-width:768px){
  .topbar{padding:0 16px;height:54px}
  .topbar-right-btn{display:none}
  .container{padding:20px 16px 80px}
  .page-headline h1{font-size:24px}
  .hero-grid{grid-template-columns:repeat(2,1fr);gap:10px}
  .hero-card{padding:16px}
  .hero-val{font-size:24px}
  .tier-tabs{gap:6px}
  .tier-tab{padding:7px 12px;font-size:12px}
  .grid-card-head{padding:14px 16px}
  .grid-card-body{padding:16px}
  .grid-8x8{gap:3px;min-width:340px}
  .g-cell{font-size:9px;border-radius:5px}
  .earnings-grid{grid-template-columns:1fr}
  .level-row{gap:8px}
}
@media(max-width:480px){
  .hero-val{font-size:22px}
  .grid-card-meta{flex-wrap:wrap}
  .back-btn span{display:none}
}
</style>
</head>
<body>

<!-- â”€â”€ Top Bar â”€â”€ -->
<div class="topbar">
  <div class="topbar-left">
    <a href="/dashboard" class="back-btn">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5"/><path d="M12 19l-7-7 7-7"/></svg>
      <span>Dashboard</span>
    </a>
  </div>
  <div style="display:flex;align-items:center;gap:12px">
    <div class="balance-chip">${{ '%.2f'|format(balance) }} USDT</div>
    <a href="/packages" class="topbar-right-btn" style="font-size:13px;font-weight:700;color:#fff;background:linear-gradient(135deg,#00b4d8,#6d28d9);padding:8px 18px;border-radius:8px;text-decoration:none;white-space:nowrap;transition:all 0.2s">+ Activate Tier</a>
  </div>
</div>

<div class="container">

  <!-- â”€â”€ Page Headline â”€â”€ -->
  <div class="page-headline">
    <h1>Profit Engine Grids</h1>
    <p>8Ã—8 Recurring Grid Â· 63 seats per advance</p>
  </div>

  <!-- â”€â”€ Hero Stats â”€â”€ -->
  <div class="hero-grid">
    <div class="hero-card c1">
      <div class="hero-label">Completed Advances</div>
      <div class="hero-val cyan">{{ grid_stats.completed_advances }}</div>
      <div class="hero-desc">Fully filled grids</div>
    </div>
    <div class="hero-card c2">
      <div class="hero-label">Active Grids</div>
      <div class="hero-val violet">{{ grid_stats.active_grids }}</div>
      <div class="hero-desc">Currently filling</div>
    </div>
    <div class="hero-card c3">
      <div class="hero-label">Total Earned</div>
      <div class="hero-val green">${{ '%.2f'|format(grid_stats.total_earned) }}</div>
      <div class="hero-desc">All-time grid income</div>
    </div>
    <div class="hero-card c4">
      <div class="hero-label">Network Size</div>
      <div class="hero-val amber">{{ grid_stats.total_members }}</div>
      <div class="hero-desc">Members across grids</div>
    </div>
  </div>

  {% if grid_stats.active_grids == 0 and grid_stats.completed_advances == 0 %}
  <!-- â”€â”€ Empty State â”€â”€ -->
  <div class="grid-card">
    <div class="empty">
      <div class="empty-icon">â—ˆ</div>
      <div class="empty-title">No Active Grids Yet</div>
      <div class="empty-sub">Activate your first campaign tier to launch your 8Ã—8 Profit Engine Grid. Fill 63 seats, earn 25% direct sponsor + 8.75% uni-level per entry, then it resets and you earn again.</div>
      <a href="/packages" class="empty-cta">ðŸš€ Activate Your First Grid â†’</a>
    </div>
  </div>

  {% else %}

  <!-- â”€â”€ Tier Tabs â”€â”€ -->
  <div class="tier-tabs">
    {% for tier, price in GRID_PACKAGES.items() %}
    <a href="?tier={{ tier }}" class="tier-tab {% if selected_tier == tier %}active{% endif %}">
      Tier {{ tier }} Â· ${{ price|int }}
    </a>
    {% endfor %}
  </div>

  <!-- â”€â”€ Grid Cards for selected tier â”€â”€ -->
  {% set tier_grids = grid_stats.active_grids_detail|selectattr('tier','equalto',selected_tier)|list %}
  {% if tier_grids|length > 0 %}
    {% for g in tier_grids %}
    <div class="grid-card">
      <div class="grid-card-head">
        <div class="grid-card-title">
          <div class="dot"></div>
          ${{ g.price|int }} Campaign Tier Â· Advance #{{ g.advance }}
        </div>
        <div class="grid-card-meta">
          <span class="filled-badge">{{ g.filled }}/63 filled</span>
          <span class="status-badge">Active</span>
        </div>
      </div>
      <div class="grid-card-body">

        <!-- Progress -->
        <div class="progress-wrap">
          <div class="progress-bar"><div class="progress-fill" style="width:{{ g.pct }}%"></div></div>
          <div class="progress-text">
            <span>{{ g.pct }}% complete</span>
            <span style="color:#16a34a;font-weight:700">${{ '%.2f'|format(g.owner_potential) }} earned</span>
          </div>
        </div>

        <!-- 8Ã—8 Grid Visual -->
        <div class="section-label" style="text-align:center">Grid Visualisation</div>
        <div class="grid-container">
          <div class="grid-8x8">
          {% for i in range(64) %}
            {% if i == 0 %}
              <div class="g-cell owner">YOU</div>
            {% elif i <= g.filled %}
              <div class="g-cell filled">{{ i }}</div>
            {% else %}
              <div class="g-cell empty">{{ i }}</div>
            {% endif %}
          {% endfor %}
        </div>
        </div>
        <div class="legend">
          <div class="legend-item"><div class="legend-dot" style="background:linear-gradient(135deg,#16a34a,#059669)"></div>You (Owner)</div>
          <div class="legend-item"><div class="legend-dot" style="background:linear-gradient(135deg,rgba(0,180,216,0.4),rgba(109,40,217,0.3));border:1px solid rgba(0,180,216,0.4)"></div>Filled</div>
          <div class="legend-item"><div class="legend-dot" style="background:rgba(255,255,255,0.03);border:1px dashed rgba(255,255,255,0.15)"></div>Empty</div>
        </div>

        <!-- Level Breakdown -->
        <div class="section-label">Level Earnings Breakdown</div>
        <div>
          {% for lvl in range(1,9) %}
          {% set per_seat = g.price * 0.0875 %}
          {% set seats_before = (lvl-1)*8 %}
          {% set seats_filled_raw = g.filled - seats_before %}
          {% set seats_this = [seats_filled_raw, 0]|max %}
          {% set seats_this_level = [seats_this, 8]|min %}
          <div class="level-row">
            <div class="level-label">Level {{ lvl }}</div>
            <div class="level-bar-wrap"><div class="level-bar" style="width:{{ (seats_this_level/8*100)|int }}%"></div></div>
            <div class="level-seats">{{ seats_this_level }}/8</div>
            <div class="level-earn">${{ '%.2f'|format(per_seat * seats_this_level) }}</div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
    {% endfor %}

  {% else %}
  <!-- No grid for this tier -->
  <div class="grid-card">
    <div class="empty" style="padding:40px 24px">
      <div class="empty-icon">âš¡</div>
      <div class="empty-title">Tier {{ selected_tier }} Not Activated</div>
      <div class="empty-sub">Activate this campaign tier to start filling your grid and earning commissions.</div>
      <a href="/packages" class="empty-cta">Activate Tier {{ selected_tier }} â†’</a>
    </div>
  </div>
  {% endif %}

  <!-- â”€â”€ Earnings Summary â”€â”€ -->
  <div class="earnings-grid">
    <div class="earn-card">
      <div class="earn-card-title">ðŸ“Š Your Earnings</div>
      <div class="earn-row"><span class="earn-label">Direct Sponsor (25%)</span><span class="earn-val">${{ '%.2f'|format(grid_earnings) }}</span></div>
      <div class="earn-row"><span class="earn-label">Uni-Level (8.75% Ã— 8)</span><span class="earn-val">${{ '%.2f'|format(level_earnings) }}</span></div>
      <div class="earn-row"><span class="earn-label">Upline Placements</span><span class="earn-val">${{ '%.2f'|format(upline_earnings) }}</span></div>
      <div class="earn-row"><span class="earn-label" style="color:#fff;font-weight:700">Total Earned</span><span class="earn-val total">${{ '%.2f'|format(total_earned) }}</span></div>
    </div>
    <div class="earn-card">
      <div class="earn-card-title">ðŸ”® Per-Advance Potential</div>
      {% set tier_data = [(20,'Starter'),(50,'Builder'),(100,'Pro'),(200,'Advanced'),(400,'Elite'),(600,'Premium'),(800,'Executive'),(1000,'Legend')] %}
      {% for price, name in tier_data %}
      {% set earn = price * 63 * 0.70 %}
      <div class="earn-row"><span class="earn-label">{{ name }} Â· ${{ price }}</span><span class="earn-val">${{ '%.0f'|format(earn) }}</span></div>
      {% endfor %}
    </div>
  </div>

  {% endif %}

</div>

</body>
</html>
