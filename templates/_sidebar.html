<!-- â•â•â• SHARED SIDEBAR â€” collapsible nav sections â•â•â• -->
<aside class="sidebar" id="mainSidebar">
  <a href="/dashboard" class="sidebar-logo">
    <svg style="width:28px;height:28px;flex-shrink:0" viewBox="0 0 32 32" fill="none"><circle cx="16" cy="16" r="16" fill="#0ea5e9"/><path d="M13 10.5L22 16L13 21.5V10.5Z" fill="white"/></svg>
    <div>
      <div style="font-family:Sora,sans-serif;font-size:17px;font-weight:800;color:#fff;line-height:1.2">Super<span style="color:#38bdf8">Ad</span>Pro</div>
    </div>
  </a>

  <div class="nav-scroll">
    <!-- â”€â”€ Dashboard (always visible) â”€â”€ -->
    <a href="/dashboard" class="nav-item{% if active_page=='dashboard' %} active{% endif %}"><span class="nav-icon">âŠ</span>Dashboard</a>

    <div class="nav-divider"></div>

    <!-- â”€â”€ Account â”€â”€ -->
    <div class="nav-group" data-group="account">
      <div class="nav-header" onclick="toggleNav('account')">
        <span>Account</span>
        <span class="nav-chevron">â€º</span>
      </div>
      <div class="nav-children">
        <a href="/account" class="nav-item{% if active_page=='account' %} active{% endif %}"><span class="nav-icon">â—‰</span>My Profile</a>
        <a href="/support" class="nav-item{% if active_page=='support' %} active{% endif %}"><span class="nav-icon">â—Œ</span>Support</a>
        <a href="/wallet" class="nav-item{% if active_page=='wallet' %} active{% endif %}"><span class="nav-icon">â—</span>Wallet</a>
      </div>
    </div>

    <div class="nav-divider"></div>

    <!-- â”€â”€ Video â”€â”€ -->
    <div class="nav-group" data-group="video">
      <div class="nav-header" onclick="toggleNav('video')">
        <span>Video Hub</span>
        <span class="nav-chevron">â€º</span>
      </div>
      <div class="nav-children">
        <a href="/watch" class="nav-item{% if active_page=='watch' %} active{% endif %}"><span class="nav-icon">â–¶</span>Watch to Earn</a>
        <a href="/video-library" class="nav-item{% if active_page=='video-library' %} active{% endif %}"><span class="nav-icon">ğŸ¬</span>My Campaigns</a>
        <a href="/analytics" class="nav-item{% if active_page=='analytics' %} active{% endif %}"><span class="nav-icon">ğŸ“ˆ</span>Analytics</a>
      </div>
    </div>

    <div class="nav-divider"></div>

    <!-- â”€â”€ Marketing Suite â”€â”€ -->
    <div class="nav-group" data-group="marketing">
      <div class="nav-header" onclick="toggleNav('marketing')">
        <span>Marketing Suite</span>
        <span class="nav-chevron">â€º</span>
      </div>
      <div class="nav-children">
        <a href="/campaign-studio" class="nav-item{% if active_page=='campaign-studio' %} active{% endif %}"><span class="nav-icon">ğŸ¤–</span>AI Campaign</a>
        <a href="/social-post-generator" class="nav-item{% if active_page=='social-post-generator' %} active{% endif %}"><span class="nav-icon">ğŸ“±</span>Social Post Generator</a>
        <a href="/video-script-generator" class="nav-item{% if active_page=='video-script-generator' %} active{% endif %}"><span class="nav-icon">ğŸ¬</span>Video Script Generator</a>
        <a href="/niche-finder" class="nav-item{% if active_page=='niche-finder' %} active{% endif %}"><span class="nav-icon">ğŸ’¡</span>Niche Finder</a>
        <a href="/swipe-file" class="nav-item{% if active_page=='swipe-file' %} active{% endif %}"><span class="nav-icon">ğŸ“‹</span>Swipe File</a>
        <a href="/email-swipes" class="nav-item{% if active_page=='email-swipes' %} active{% endif %}"><span class="nav-icon">ğŸ“§</span>Email Swipes</a>
      </div>
    </div>

    <div class="nav-divider"></div>

    <!-- â”€â”€ Tools â”€â”€ -->
    <div class="nav-group" data-group="tools">
      <div class="nav-header" onclick="toggleNav('tools')">
        <span>Tools</span>
        <span class="nav-chevron">â€º</span>
      </div>
      <div class="nav-children">
        <a href="/funnels" class="nav-item{% if active_page=='funnels' %} active{% endif %}"><span class="nav-icon">ğŸš€</span>Page Builder</a>
        <a href="/link-tools" class="nav-item{% if active_page=='link-tools' %} active{% endif %}"><span class="nav-icon">ğŸ”—</span>Link Tools</a>
        <a href="/affiliate" class="nav-item{% if active_page=='affiliate' %} active{% endif %}"><span class="nav-icon">ğŸ¤</span>Social Share</a>
      </div>
    </div>

    <div class="nav-divider"></div>

    <!-- â”€â”€ Affiliate â”€â”€ -->
    <div class="nav-group" data-group="affiliate">
      <div class="nav-header" onclick="toggleNav('affiliate')">
        <span>Affiliate</span>
        <span class="nav-chevron">â€º</span>
      </div>
      <div class="nav-children">
        <a href="/compensation-plan" class="nav-item{% if active_page=='compensation-plan' %} active{% endif %}"><span class="nav-icon">ğŸ“Š</span>Comp Plan</a>
        <a href="/income-grid" class="nav-item{% if active_page=='income-grid' %} active{% endif %}"><span class="nav-icon">âš¡</span>Profit Grid</a>
        <a href="/grid-visualiser" class="nav-item{% if active_page=='grid-visualiser' %} active{% endif %}"><span class="nav-icon">â—ˆ</span>Grid Visualiser</a>
      </div>
    </div>

    <div class="nav-divider"></div>

    <!-- â”€â”€ Courses â”€â”€ -->
    <div class="nav-group" data-group="courses">
      <div class="nav-header" onclick="toggleNav('courses')">
        <span>Courses</span>
        <span class="nav-chevron">â€º</span>
      </div>
      <div class="nav-children">
        <a href="/courses" class="nav-item{% if active_page=='courses' %} active{% endif %}"><span class="nav-icon">ğŸ“</span>Course Library</a>
        <a href="/passup-visualiser" class="nav-item{% if active_page=='passup-visualiser' %} active{% endif %}"><span class="nav-icon">â†‘</span>Pass-Up Visualiser</a>
      </div>
    </div>

    <div class="nav-divider"></div>

    <!-- â”€â”€ Ad Board â”€â”€ -->
    <a href="/ads/my" class="nav-item{% if active_page=='ads' %} active{% endif %}"><span class="nav-icon">ğŸ“¢</span>Ad Board</a>
  </div>

  <div class="sidebar-footer">
    <a href="/logout" class="nav-item" style="color:#64748b;border:none"><span class="nav-icon">â‹</span>Sign Out</a>
  </div>
</aside>

<style>
/* â”€â”€ Sidebar Collapsible Nav â”€â”€ */
.nav-scroll{flex:1;overflow-y:auto;padding:8px 0}
.nav-divider{height:1px;background:rgba(255,255,255,0.06);margin:6px 16px}
.nav-group{overflow:hidden}
.nav-header{display:flex;align-items:center;justify-content:space-between;padding:10px 18px;font-size:12px;font-weight:800;letter-spacing:1.2px;text-transform:uppercase;color:rgba(56,189,248,0.7);cursor:pointer;user-select:none;transition:all 0.2s}
.nav-header:hover{color:#38bdf8;background:rgba(56,189,248,0.04)}
.nav-chevron{font-size:14px;font-weight:800;transition:transform 0.25s ease;color:rgba(56,189,248,0.4)}
.nav-group.open .nav-chevron{transform:rotate(90deg);color:#38bdf8}
.nav-children{max-height:0;overflow:hidden;transition:max-height 0.3s ease}
.nav-group.open .nav-children{max-height:500px}
</style>

<script>
function toggleNav(group) {
  var el = document.querySelector('[data-group="'+group+'"]');
  if (el) el.classList.toggle('open');
}

// Auto-open group that contains the active page
document.addEventListener('DOMContentLoaded', function() {
  var active = document.querySelector('.nav-children .nav-item.active');
  if (active) {
    var group = active.closest('.nav-group');
    if (group) group.classList.add('open');
  }
  // Restore saved open states
  try {
    var saved = JSON.parse(localStorage.getItem('navOpen') || '{}');
    Object.keys(saved).forEach(function(g) {
      if (saved[g]) {
        var el = document.querySelector('[data-group="'+g+'"]');
        if (el) el.classList.add('open');
      }
    });
  } catch(e) {}
});

// Save open/close state
document.querySelectorAll('.nav-header').forEach(function(h) {
  h.addEventListener('click', function() {
    setTimeout(function() {
      var state = {};
      document.querySelectorAll('.nav-group').forEach(function(g) {
        state[g.dataset.group] = g.classList.contains('open');
      });
      try { localStorage.setItem('navOpen', JSON.stringify(state)); } catch(e) {}
    }, 50);
  });
});
</script>
